{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","REFRESH_INTERVAL","DEFAULT_LANGUAGE","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","getAllComments","html","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","draggableElement","resizableWidget","resizable","isResizable","isPlainObject","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","lang","hide","title","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","target","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","focusout","toolbarContainerElement","active","get","contains","is","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","tagName","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","aria-label","commandArguments","noop","version","edge","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","rowIndex","cells","colIndex","cellIndex","cell","registeredColumns","rowSpan","_mapColspan","colSpan","ri","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","l","attributesToRemove","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","tag","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","children","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","k-i-cells-merge-horizontally","k-i-cells-merge-vertically","k-i-cell-split-horizontally","k-i-cell-split-vertically","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","tablesInsert","tablesAddDelete","tablesMerge","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","unwrapTag","isList","li","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","row","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAtrr","_findRowSpanCell","_resetTableResizing","InsertRowCommand","cellCount","lastTd","newRow","rowSpanIndex","td","prop","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","_handleRowSpanCells","adjacentCell","previousRow","before","after","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","attrValue","emptyTd","_getColspanValue","_getRowspanValue","_getWidth","_splitCellVertically","availableTd","TableModificationTool","commandsMap","insert","delete","column","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","isParentTable","removeAttributes","removeAttributeNode","createColGroup","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","chrome","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","COLATTR","WIDTH","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","tBodyOffsetTop","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","$row","tableBodyTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellsLength","newRowsCount","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var PLACEHOLDER_CLASS = 'k-placeholder';\n        var PLACEHOLDER_TAG_ID = 'placeholder';\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = 'en';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\" aria-label=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span></a>',\n            tableWizardButtonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a tabindex=\"0\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\" title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    mergeCellsHorizontally: 'cells-merge-horizontally',\n                    mergeCellsVertically: 'cells-merge-vertically',\n                    splitCellHorizontally: 'cell-split-horizontally',\n                    splitCellVertically: 'cell-split-vertically',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n            cacheComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], '{' + index + '}');\n                }\n                return content;\n            },\n            retrieveComments: function (content, comments) {\n                for (var index in comments) {\n                    content = content.replace('{' + index + '}', comments[index]);\n                }\n                return content;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            mergeCellsHorizontally: 'Merge cells horizontally',\n            mergeCellsVertically: 'Merge cells vertically',\n            splitCellHorizontally: 'Split cells horizontally',\n            splitCellVertically: 'Split cells vertically',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import',\n            print: 'Print'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn',\n                'mergeCellsHorizontally',\n                'mergeCellsVertically',\n                'splitCellHorizontally',\n                'splitCellVertically'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type, comments;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    comments = dom.getAllComments($('<div></div>').html(value)[0]);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || '\\uFEFF');\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n                this._initializePlaceholder();\n            },\n            _togglePlaceholder: function (show) {\n                var that = this, body = that.body, $body = $(body), placeholder = that.options.placeholder;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                $body.attr('aria-label', function () {\n                    return show ? placeholder : '';\n                });\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    var draggableElement = $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                var lang = '';\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                    iframe.src = src;\n                }\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                lang = document.getElementsByTagName('html')[0].getAttribute('lang') || DEFAULT_LANGUAGE;\n                doc.open();\n                doc.write('<!DOCTYPE html><html lag=\\'' + lang + '\\'><head>' + '<meta charset=\\'utf-8\\' />' + '<title>Kendo UI Editor content</title>' + '<style>' + 'html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}' + 'body{padding:0;margin:0;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (os.ios ? 'word-break:keep-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + '.k-placeholder{color:grey}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        textarea.trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._initializePlaceholder();\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function () {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializePlaceholder: function () {\n                var that = this, placeholder = that.options.placeholder, style, $head;\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n                style = '<style id=\\'' + PLACEHOLDER_TAG_ID + '\\'>.' + PLACEHOLDER_CLASS + ':before { content: \\'' + placeholder + '\\'; }' + '</style>';\n                $head = $(that.document.head);\n                $head.find('#' + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n                that._togglePlaceholder(!that.value().trim());\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target).closest('a[href]');\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n                if (e.target.tagName && e.target.tagName.toLowerCase() === 'html') {\n                    setTimeout(function () {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                placeholder: '',\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial, Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\"Courier New\", Courier, monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia, serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact, Charcoal, sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\"Lucida Console\", Monaco, monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma, Geneva, sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\"Times New Roman\", Times, serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\"Trebuchet MS\", Helvetica, sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana, Geneva, sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf' && name !== 'exportAs') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title,\n                    'aria-label': options.title\n                });\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), selfClosing = makeMap('area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr'.split(',')), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getAllComments: function (rootElem) {\n                var comments = [];\n                var iterator = document.createNodeIterator(rootElem, NodeFilter.SHOW_COMMENT, function () {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n                var curNode = iterator.nextNode();\n                while (curNode) {\n                    comments.push(curNode.nodeValue);\n                    curNode = iterator.nextNode();\n                }\n                return comments;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isSelfClosing: function (node) {\n                return selfClosing[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                    persistedScrollTop = undefined;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!Dom.isEmpty(node) && node.childNodes.length === 0 || Dom.isBlock(node) && Dom.allWhitespaceContent(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tags) {\n                if (typeof tags === 'string') {\n                    tags = [tags];\n                }\n                while (node && tags.indexOf(Dom.name(node)) < 0) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            mergeAttributes: function (origin, target) {\n                if (!origin.attributes.length) {\n                    return;\n                }\n                $.each(origin.attributes, function () {\n                    if (this.name !== 'contenteditable') {\n                        $(target).attr(this.name, this.value);\n                    }\n                });\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types) && !$(editable).is('.k-editor')) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            },\n            reMapTableColumns: function (table, colAttr) {\n                Dom._mapColIndices(table, colAttr);\n            },\n            clearTableMappings: function (table, colAttr) {\n                $(table).find('[' + colAttr + ']').removeAttr(colAttr);\n            },\n            _mapColIndices: function (table, colAttr) {\n                var registeredColumns = {};\n                for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                    var cells = table.rows[rowIndex].cells;\n                    var colIndex = 0;\n                    for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                        var cell = cells[cellIndex];\n                        if (cell.rowSpan > 1) {\n                            this._mapColspan(cell.rowSpan, rowIndex, colIndex, registeredColumns);\n                        }\n                        if (registeredColumns[rowIndex]) {\n                            while (registeredColumns[rowIndex][colIndex]) {\n                                colIndex++;\n                            }\n                        }\n                        cell.setAttribute(colAttr, colIndex);\n                        if (cell.colSpan > 1) {\n                            colIndex = colIndex + cell.colSpan - 1;\n                        }\n                    }\n                }\n            },\n            _mapColspan: function (rowSpan, rowIndex, colIndex, registeredColumns) {\n                var index = colIndex;\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    var attributesToRemove = [];\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            attributesToRemove.push(name);\n                        }\n                    }\n                    for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                        this.removeAttribute(attributesToRemove[i]);\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.element.attr('title', that.options.title);\n                that.wrapper.attr('title', that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth > 0) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting',\n            'k-i-cells-merge-horizontally': 'mergeCellsHorizontally',\n            'k-i-cells-merge-vertically': 'mergeCellsVertically',\n            'k-i-cell-split-horizontally': 'splitCellHorizontally',\n            'k-i-cell-split-vertically': 'splitCellVertically'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize(true);\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tablesInsert: ['createTable'],\n                tablesAddDelete: [\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                tablesMerge: [\n                    'mergeCellsHorizontally',\n                    'mergeCellsVertically',\n                    'splitCellHorizontally',\n                    'splitCellVertically'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('> li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: kendo.support.isRtl(that.element) ? 'bottom left' : 'bottom right',\n                    position: kendo.support.isRtl(that.element) ? 'top left' : 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _getWindowWidth: function () {\n                var that = this, wrapper = that.window.wrapper, editorElement = that.options.editor.element;\n                return outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10);\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).addClass('k-state-disabled');\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end().parent().removeClass('k-state-disabled').css('display', '');\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                var editorElement = this.options.editor.element;\n                var toolbarWindow = this.window;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (toolbarWindow) {\n                    toolbarWindow.wrapper.width(this._getWindowWidth());\n                    if (!toolbarWindow._moved) {\n                        toolbarWindow.wrapper.css({ left: Math.max(0, parseInt(editorElement.offset().left, 10)) });\n                    }\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth') && !group.hasClass('k-state-disabled')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, dom = Editor.Dom;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content, comments;\n                options.serialization.immutables = editor.immutables;\n                comments = dom.getAllComments(editor.body);\n                content = EditorUtils.cacheComments(editor.value(), comments);\n                content = ViewHtmlCommand.indent(content);\n                content = EditorUtils.retrieveComments(content, comments);\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<div class=\\'k-edit-form-container\\'></div>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                if (nodes.length > 1) {\n                    for (i = 0, l = nodes.length; i < l; i++) {\n                        node = nodes[i];\n                        formatNode = this.format(node, true);\n                        formatNodes.push(formatNode);\n                    }\n                } else {\n                    node = nodes[0];\n                    formatNode = this.format(node, false);\n                }\n                this.consolidate(formatNodes);\n            },\n            format: function (node, outerMostInline) {\n                var formatNode = this.finder.findSuitable(node);\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                if (formatNode) {\n                    if (dom.is(formatNode, 'font')) {\n                        if (styleAttr.color) {\n                            formatNode.removeAttribute('color');\n                        }\n                        if (styleAttr.fontName) {\n                            formatNode.removeAttribute('face');\n                        }\n                        if (styleAttr.fontSize) {\n                            formatNode.removeAttribute('size');\n                        }\n                    }\n                    dom.attr(formatNode, attributes);\n                } else {\n                    while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                        node = node.parentNode;\n                    }\n                    formatNode = this.wrap(node);\n                }\n                return formatNode;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText && node.className === last.className) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var that = this, editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        delete that.storedRange;\n                        delete that._inputFocused;\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        that.storedRange = editor.getRange();\n                        picker._popup.element.on(MOUSEDOWN_NS, function (e) {\n                            if (!$(e.target).is('input.k-color-value')) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*:not(input)').attr('unselectable', 'on').end().find('input').on('focus', function () {\n                                that._inputFocused = true;\n                            });\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                        if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                            editor.selectRange(that.storedRange);\n                        }\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        if (e.sender._value.toCssRgba() === 'rgba(255, 255, 255, 0)') {\n                            return;\n                        }\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*:not(input)').attr('unselectable', 'on');\n                ui.value('transparent');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerText) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1] || markers[0]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerText: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerText = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerText = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        namedFormat = EditorUtils.formatByName(name, this.format);\n                        if (namedFormat.attr.style) {\n                            dom.unstyle(formatNode, namedFormat.attr.style);\n                        }\n                        if (namedFormat.attr.className) {\n                            dom.removeClass(formatNode, namedFormat.attr.className);\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    if (dom.isBlock(ancestors[0])) {\n                        dom.mergeAttributes(ancestors[0], formatNode);\n                    }\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                var selectBox;\n                that.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n                ui.attr('title', initOptions.title);\n                this._selectBox.wrapper.attr('title', initOptions.title);\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                var selectBox;\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                selectBox = ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                }).data('kendoSelectBox');\n                ui.attr('title', initOptions.title);\n                selectBox.wrapper.attr('title', initOptions.title);\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous, { links: true });\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', [\n        'editor/plugins/formatblock',\n        'editor/plugins/insert'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.tableWizardButtonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', '.k-ct-cell', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', '.k-ct-cell', function () {\n                    that._setTableSize();\n                }).on('down', '.k-ct-cell', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var TableModificationCommand = Command.extend({\n            _clearColIndexAtrr: function (table) {\n                dom.clearTableMappings(table, 'col-index');\n            },\n            _mapColIndices: function (table) {\n                dom.reMapTableColumns(table, 'col-index');\n            },\n            _findRowSpanCell: function (table, rowIndex, colIndex) {\n                var row, cell;\n                for (var i = rowIndex; i >= 0; i--) {\n                    row = table.rows[i];\n                    cell = $(row).find('[col-index=' + colIndex + ']');\n                    if (cell.length) {\n                        return cell;\n                    }\n                }\n            },\n            _resetTableResizing: function (editor) {\n                editor._destroyResizings();\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            }\n        });\n        var InsertRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), table = dom.closest(td, 'table'), position = this.options.position || 'after', cellCount, row, lastTd, cell, newRow, rowIndex, rowSpanIndex;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                this._mapColIndices(table);\n                row = td.parentNode;\n                rowIndex = dom.findNodeIndex(row, true);\n                if (td.rowSpan > 1 && position === 'after') {\n                    row = table.rows[rowIndex + td.rowSpan - 1];\n                }\n                cellCount = table.rows[0].cells.length;\n                lastTd = table.rows[0].cells[cellCount - 1];\n                cellCount = parseInt(lastTd.getAttribute('col-index'), 10) + lastTd.colSpan - 1;\n                newRow = row.cloneNode(true);\n                $(newRow).empty();\n                for (var i = 0; i <= cellCount; i = i + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        if (cell.prop('rowSpan') > 1 && position === 'after' && cell) {\n                            cell.attr('rowspan', cell.prop('rowSpan') + 1);\n                        } else {\n                            this._appendCell(newRow, cell);\n                        }\n                    } else {\n                        rowIndex = dom.findNodeIndex(row, true);\n                        cell = this._findRowSpanCell(table, rowIndex, i);\n                        rowSpanIndex = cell.closest('tr').index();\n                        if (rowSpanIndex + cell.prop('rowSpan') - 1 === rowIndex && position === 'after') {\n                            this._appendCell(newRow, cell);\n                        } else {\n                            cell.attr('rowspan', cell.prop('rowSpan') + 1);\n                        }\n                    }\n                }\n                if (position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this._clearColIndexAtrr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _appendCell: function (row, cell) {\n                var newCell;\n                newCell = cell.clone();\n                newCell.html(Editor.emptyTableCellContent);\n                newCell.removeAttr('rowspan');\n                newCell.appendTo(row);\n            }\n        });\n        var InsertColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), table = dom.closest(td, 'table'), columnIndex, i, rows = table && table.rows, cell, newCell, position = this.options.position || 'after';\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                if (td.colSpan > 1 && position === 'after') {\n                    td.setAttribute('col-index', columnIndex + td.colSpan - 1);\n                    columnIndex = columnIndex + td.colSpan - 1;\n                }\n                for (i = 0; i < rows.length; i++) {\n                    cell = this._processForColSpan(rows[i], columnIndex, position, td);\n                    if (!cell) {\n                        continue;\n                    }\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    newCell.removeAttribute('colspan');\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                    this._resizeCells(newCell, cell);\n                }\n                this._clearColIndexAtrr(table);\n                this.releaseRange(range);\n                this._resetTableResizing(this.editor);\n            },\n            _processForColSpan: function (row, columnIndex, position, selectedCell) {\n                var cell, colSpanEffect, index = columnIndex - 1;\n                cell = $(row).find('[col-index=' + columnIndex + ']')[0];\n                if (cell && cell.colSpan > 1 && position === 'after' && cell !== selectedCell) {\n                    cell.colSpan += 1;\n                    return;\n                }\n                if (cell) {\n                    return cell;\n                }\n                for (index; index >= 0; index--) {\n                    cell = $(row).find('[col-index=' + index + ']')[0];\n                    if (cell && cell.colSpan > 1) {\n                        break;\n                    }\n                }\n                if (!cell) {\n                    return;\n                }\n                colSpanEffect = parseInt(cell.getAttribute('col-index'), 10) + cell.colSpan - 1;\n                if (colSpanEffect === columnIndex && position === 'after') {\n                    return cell;\n                } else if (columnIndex <= colSpanEffect) {\n                    cell.setAttribute('colspan', cell.colSpan + 1);\n                }\n            },\n            _resizeCells: function (newCell, cell) {\n                var width = newCell.style.width, parsedWidth, unit, calculatedWidth;\n                if (!width) {\n                    return;\n                }\n                parsedWidth = parseFloat(width);\n                unit = width.slice(parsedWidth.toString().length);\n                calculatedWidth = parsedWidth / 2 + unit;\n                newCell.style.width = calculatedWidth;\n                cell.style.width = calculatedWidth;\n            }\n        });\n        var DeleteRowCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var td = dom.closest(range.endContainer, [\n                    'td',\n                    'th'\n                ]);\n                var row = rows[0];\n                var rowSpan = td ? td.rowSpan : 1;\n                var rowIndex = $(rows[0]).index();\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (!table || this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                for (var x = 0; x < rowSpan; x++) {\n                    if (rows.indexOf(table.rows[rowIndex + x]) < 0) {\n                        rows.push(table.rows[rowIndex + x]);\n                    }\n                }\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else {\n                    this._mapColIndices(table);\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        this._handleRowSpanCells(table, row);\n                        dom.remove(row);\n                    }\n                    this._clearColIndexAtrr(table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _handleRowSpanCells: function (table, row) {\n                var index, cell, adjacentCell, previousRow, rowIndex = dom.findNodeIndex(row, true), lastIndex = parseInt(row.cells[row.cells.length - 1].getAttribute('col-index'), 10);\n                for (index = 0; index <= lastIndex; index = index + cell.prop('colSpan')) {\n                    cell = $(row).find('[col-index=' + index + ']');\n                    if (cell.length && cell.prop('rowSpan') > 1) {\n                        previousRow = table.rows[rowIndex + 1];\n                        adjacentCell = $(previousRow).find('[col-index=' + (index + 1) + ']');\n                        if (adjacentCell.length) {\n                            adjacentCell.before(cell);\n                        } else {\n                            adjacentCell = $(previousRow).find('[col-index=' + (index - 1) + ']');\n                            adjacentCell.after(cell);\n                        }\n                        this._reduceRowSpan(cell);\n                    }\n                    if (!cell.length) {\n                        cell = this._findRowSpanCell(table, rowIndex, index);\n                        this._reduceRowSpan(cell);\n                    }\n                }\n            },\n            _reduceRowSpan: function (td) {\n                var rowSpanValue = td.prop('rowSpan') - 1;\n                if (rowSpanValue <= 1) {\n                    td.removeAttr('rowspan');\n                } else {\n                    td.attr('rowspan', rowSpanValue);\n                }\n            }\n        });\n        var DeleteColumnCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), table = dom.closest(td, 'table'), rows = table && table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows && rows[0].cells.length, focusElement, i, cell, x;\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1 || td.colSpan == columnCount) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                    this._resetTableResizing(this.editor);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    this._mapColIndices(table);\n                    columnIndex = parseInt(td.getAttribute('col-index'), 10);\n                    for (x = 0; x < td.colSpan; x++) {\n                        for (i = 0; i < rows.length; i = i + (cell.prop('rowSpan') || 1)) {\n                            cell = $(rows[i]).find('[col-index=' + (columnIndex + x) + ']');\n                            if (cell.length && cell.prop('colSpan') <= 1) {\n                                cell.remove();\n                            } else {\n                                this._handleColSpanCells(rows[i], columnIndex + x);\n                            }\n                        }\n                    }\n                    this._clearColIndexAtrr(table);\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n                this._resetTableResizing(this.editor);\n            },\n            _handleColSpanCells: function (row, colIndex) {\n                var cell = $(row).find('[col-index=' + colIndex + ']');\n                if (cell.length && cell.prop('colSpan') > 1) {\n                    var clone = cell.clone(true);\n                    cell.after(clone);\n                    this._reduceColSpan(clone);\n                    clone.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                    cell.remove();\n                    return;\n                }\n                for (var i = colIndex; i >= 0; i--) {\n                    cell = $(row).find('[col-index=' + i + ']');\n                    if (cell.length) {\n                        this._reduceColSpan(cell);\n                        cell.attr('col-index', parseInt(cell.attr('col-index'), 10) + 1);\n                        return;\n                    }\n                }\n            },\n            _reduceColSpan: function (td) {\n                var colSpanValue = td.prop('colSpan') - 1;\n                if (colSpanValue <= 1) {\n                    td.removeAttr('colspan');\n                } else {\n                    td.attr('colspan', colSpanValue);\n                }\n            }\n        });\n        var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), table, row, columnIndex, nextTd;\n                if (!td) {\n                    return;\n                }\n                table = dom.closest(td, 'table');\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = parseInt($(td).attr('col-index'), 10);\n                nextTd = $(row).find('[col-index=' + (columnIndex + 1 + this._getColspan(td) - 1) + ']').get(0);\n                if (!nextTd || $(nextTd).is('[rowspan]') || $(td).is('[rowspan]')) {\n                    this._clearColIndexAtrr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                $(td).prop('colspan', this._getColspan(td) + this._getColspan(nextTd)).append(dom.emptyNode(nextTd) ? '' : '<br/>' + nextTd.innerHTML);\n                $(nextTd).remove();\n                this._clearColIndexAtrr(table);\n                this.releaseRange(range);\n            },\n            _getColspan: function (td) {\n                return parseInt(td.getAttribute('colspan'), 10) || 1;\n            }\n        });\n        var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), tr, table, columnIndex, rowIndex, targetRow, bottomTd;\n                if (!td) {\n                    return;\n                }\n                tr = dom.closest(td, 'tr');\n                table = dom.closest(td, 'table');\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n                targetRow = table.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                this._mapColIndices(table);\n                columnIndex = $(td).attr('col-index');\n                bottomTd = $(targetRow).find('[col-index=' + columnIndex + ']').get(0);\n                if (!bottomTd || $(bottomTd).is('[colspan]') || $(td).is('[colspan]')) {\n                    this._clearColIndexAtrr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n                $(td).prop('rowspan', this._getRowspan(td) + this._getRowspan(bottomTd)).append(dom.emptyNode(bottomTd) ? '' : '<br/>' + bottomTd.innerHTML);\n                $(bottomTd).remove();\n                this._clearColIndexAtrr(table);\n                this.releaseRange(range);\n            },\n            _getRowspan: function (td) {\n                return parseInt(td.getAttribute('rowspan'), 10) || 1;\n            }\n        });\n        var SplitCellCommand = TableModificationCommand.extend({\n            exec: function () {\n                var attrValue, range = this.lockRange(), type = this.options.type, attr = type === 'row' ? 'colspan' : 'rowspan', td = dom.closest(range.endContainer, [\n                        'td',\n                        'th'\n                    ]), table = dom.closest(td, 'table'), emptyTd = '<td></td>';\n                if (!td || this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                attrValue = type === 'row' ? this._getColspanValue(td) - 1 : this._getRowspanValue(td) - 1;\n                this._mapColIndices(table);\n                if (type === 'row' && $(td).is('[' + attr + ']')) {\n                    $(td).prop(attr, attrValue).width(this._getWidth(table, td)).after(emptyTd);\n                } else if (type === 'column' && $(td).is('[' + attr + ']')) {\n                    this._splitCellVertically(td, table, attr, attrValue, emptyTd);\n                }\n                if (attrValue === 1) {\n                    $(td).removeAttr(attr);\n                }\n                this._clearColIndexAtrr(table);\n                this.releaseRange(range);\n            },\n            _getRowspanValue: function (td) {\n                return parseInt(td.getAttribute('rowspan'), 10);\n            },\n            _getColspanValue: function (td) {\n                return parseInt(td.getAttribute('colspan'), 10);\n            },\n            _splitCellVertically: function (td, table, attr, attrValue, emptyTd) {\n                var tr = dom.closest(td, 'tr'), columnIndex = parseInt($(td).attr('col-index'), 10), rowIndex = dom.findNodeIndex(tr, true), targetRow = $(table).find('tr').eq(rowIndex + attrValue), nextTd = targetRow.find('[col-index=' + (columnIndex + 1) + ']');\n                if (nextTd.length) {\n                    nextTd.before(emptyTd);\n                } else {\n                    targetRow.append(emptyTd);\n                }\n                $(td).prop(attr, attrValue);\n            },\n            _getWidth: function (table, td) {\n                var colIndex = td.getAttribute('col-index');\n                var availableTd = $(table).find('[col-index=' + colIndex + ']:not([colspan])');\n                if (availableTd.length) {\n                    return availableTd.width();\n                }\n                return parseFloat($(td).width() / 2);\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                var commandsMap = {\n                    row: {\n                        insert: InsertRowCommand,\n                        'delete': DeleteRowCommand,\n                        merge: MergeCellsHorizontallyCommand,\n                        split: SplitCellCommand\n                    },\n                    column: {\n                        insert: InsertColumnCommand,\n                        'delete': DeleteColumnCommand,\n                        merge: MergeCellsVerticallyCommand,\n                        split: SplitCellCommand\n                    }\n                };\n                options = extend(options, this.options);\n                options.action = options.action || 'insert';\n                return new commandsMap[options.type][options.action](options);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand,\n            MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n            MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n            SplitCellCommand: SplitCellCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n        registerTool('mergeCellsHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Right'\n            })\n        }));\n        registerTool('mergeCellsVertically', new TableModificationTool({\n            type: 'column',\n            action: 'merge',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Merge Cell Down'\n            })\n        }));\n        registerTool('splitCellHorizontally', new TableModificationTool({\n            type: 'row',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n        registerTool('splitCellVertically', new TableModificationTool({\n            type: 'column',\n            action: 'split',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Split Cell'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this.editor.body.contentEditable === 'false') {\n                    return;\n                }\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/gi, '<$1$2>&nbsp;</$1>');\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0) && !focusedTable.parents('table').length) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ], isParentTable = false;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    isParentTable = !!$(p).parents('table').length;\n                    if (isParentTable) {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.appendChild(p);\n                        }\n                        continue;\n                    }\n                    if (browser.msie) {\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                if (!kendo.support.browser.chrome && container.firstChild && container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n                    container = container.firstChild;\n                }\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (editorNS.RangeUtils.isStartOf(range, block) && (parseInt(block.style.marginLeft, 10) > 0 || parseInt(block.style.marginRight, 10) > 0)) {\n                    editor.exec('outdent');\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (range.commonAncestorContainer === editor.body) {\n                    this._surroundFullyContent(marker, range);\n                }\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (end.tagName.toLocaleLowerCase() === 'li' && dom.emptyNode(end)) {\n                    range.selectNode(end);\n                    range.deleteContents();\n                }\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                if (dom.isDataNode(start) && !dom.emptyNode(start.parentElement)) {\n                    this._cleanBomBefore(range);\n                }\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullyContent: function (marker, range) {\n                var children = range.commonAncestorContainer.children, startParent = children[0], endParent = children[children.length - 1];\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                this._moveMarker(marker, range, startParent, endParent);\n            },\n            _moveMarker: function (marker, range, startParent, endParent) {\n                var start = marker.start, end = marker.end;\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing',\n        'editor/dom'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COLATTR = 'col-index';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var tBodyOffsetTop = tableBody.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableBody.css('marginTop'));\n                that.resizeHandle.css({\n                    top: tBodyOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(column.css('marginLeft'));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(resizeHandle.css('marginLeft'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n                dom.reMapTableColumns(that.element, COLATTR);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n                if (column.prop('colSpan') > 1) {\n                    column = $(that.element).find('[' + COLATTR + '=' + (colIndex + column.prop('colSpan') - 1) + ']').eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n                nextColumn = $(that.element).find('[' + COLATTR + '=' + (colIndex + 1) + ']:not([colspan])');\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR), 10), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).attr(COLATTR) === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return parseInt($(this).attr(COLATTR), 10) === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var rowOffsetLeft = row.offset().left - (rootElement.offset().left + parseFloat(rootElement.css('borderLeftWidth'))) - parseFloat(row.css('marginLeft'));\n                var rowOffsetTop = row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(row.css('marginTop'));\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableBodyTopOffset = tableBody.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(tableBody.css('marginTop'));\n                var rowOffsetTop = $row.offset().top - (rootElement.offset().top + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat($row.css('marginTop'));\n                var resizeHandleOffsetTop = resizeHandle.offset().top - (Math.max(0, rootElement.offset().top) + parseFloat(rootElement.css('borderTopWidth'))) - parseFloat(resizeHandle.css('marginTop'));\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || '',\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor || '',\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', [\n        'editor/table-wizard/table-wizard-command',\n        'kendo.tabstrip'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}