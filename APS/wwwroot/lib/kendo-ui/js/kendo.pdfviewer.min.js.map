{"version":3,"sources":["kendo.pdfviewer.js"],"names":["f","define","$","undefined","extend","isLoaded","window","pdfjsLib","console","error","kendo","pdfviewer","pdfjs","lib","jQuery","amd","a1","a2","a3","PDFJS","Class","atob","PDFJSProcessor","init","options","viewer","that","this","file","fetchDocument","deferred","Deferred","messages","errorMessages","_isBase64Data","data","getDocument","promise","then","pdf","i","pageSizes","pagePromises","_downloadData","getData","blob","Blob","type","resolve","numPages","push","getPage","Promise","all","map","pagePromise","viewport","getViewport","scale","width","height","total","pages","e","_triggerError","message","parseError","notFoundError","name","includes","alertMessage","notFound","_renderBlankPage","fetchPageData","number","downloadFile","fileName","ui","progress","pageContainer","done","result","reader","FileReader","readAsDataURL","onload","saveAs","dataURI","proxyURL","_updateDocument","loadingTask","destroy","equalSign","notBase64","length","test","indexOf","renderTextLayer","params","processor","DPLProcessor","read","upload","download","ajax","url","dataType","success","stringify","JSON","parse","xhr","responseText","page","document","pageField","geometries","location","fromJSON","json","_clearPages","_renderPages","resize","activatePage","dpl","NS","Widget","CHANGE","KEYDOWN","CLICK","support","click","SHRINKWIDTH","kendoAttr","attr","proxy","DOT","pagerStyles","wrapperClass","iconFirst","iconLast","iconPrev","iconNext","first","last","nav","disabled","Pager","element","fn","call","linkTemplate","template","addClass","_renderLinks","_toggleDisabledClass","_attachEvents","previousNext","input","events","_pagerLink","iconClass","text","pageIdx","wrapClass","firstLink","prevLink","previous","nextLink","next","lastLink","append","_renderInput","toggleClass","on","_click","keyCode","keys","ENTER","preventDefault","_keydown","target","currentTarget","parseInt","isDefaultPrevented","_change","key","val","upDown","UP","DOWN","allowedKeys","RIGHT","LEFT","BACKSPACE","DELETE","direction","isNaN","match","trigger","setOptions","prevTotal","totalMessage","inputTemplate","shouldShrink","parent","pagerInputWrap","find","off","format","of","html","appendZoomButtons","isOverflow","className","styles","zoomOverflowButtons","zoomButtons","ZOOM_BUTTON_TEMPLATE","zoomOut","command","ZOOMOUT","zoomOutIcon","showText","zoomIn","ZOOMIN","zoomInIcon","ToolBarZoom","ToolBarOverflowZoom","ViewerToolBar","ACTION","FLATBUTTONCLASS","Item","toolbar","ToolBar","PREDEFINED_ZOOM_VALUES","auto","actual","fitToWidth","fitToPage","overflowHidden","ZOOM_COMBOBOX_TEMPLATE","DefaultTools","pager","overflow","spacer","zoom","zoomInOut","combobox","zoomLevels","toggleSelection","attributes","class","buttons","togglable","icon","group","selected","spacer2","search","open","print","AllTools","exportAs","ToolbarPager","pagerElement","change","addUidAttr","addOverflowAttr","action","value","children","targetIndex","index","shiftKey","TAB","focus","stopPropagation","registerComponent","_init","_initValue","_appendElements","throttle","bind","zoomElement","_buildComboBox","comboOptions","percent","autoWidth","actualWidth","concat","mobileOS","kendoComboBox","clearButton","getKendoComboBox","wrapper","_currentValue","parsedValue","sender","replace","_buttonCommand","button","closest","updateComboBox","enable","items","Object","_updateItems","toggle","update","_update","tool","toolOptions","toolName","isBuiltInTool","isPlainObject","aria-label","title","data-command","deepExtend","pageOptions","isBlank","_updateZoomComboBox","isPredefined","Math","round","args","Toolbar","normalizeText","String","REPLACE_REGEX","SPACE","objectKey","object","parts","sort","join","hashKey","str","hash","charCodeAt","zeroSize","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","util","size","_size","_length","_map","put","entry","_head","_tail","newer","older","get","baselineMarkerSize","createElement","cssText","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","noop","drawing","Group","Surface","RENDER","geometryTypes","Path","MultiPath","Rect","Image","Text","Page","pageNumber","_updatePageSize","ratio","pageElement","min","render","DPLPage","draw","surface","_drawGeometries","load","loaded","_initSurface","surfaceOptions","view","kGeometry","geometry","_drawPath","_drawRect","_drawImage","_drawText","rectGeo","point","transform","_getMatrix","fill","fillOptions","stroke","strokeOptions","imageRect","src","font","content","subPath","j","segment","drawAction","path","paths","segments","moveTo","apply","points","lineTo","curveTo","closed","close","matrix","create","Matrix","prototype","PDFJSPage","canvas","defaultScale","force","_scale","_page","context","getContext","_renderTask","cancel","canvasContext","_renderTextLayer","textLayer","remove","getTextContent","normalizeWhitespace","css","container","textDivs","enhanceTextSelection","isArray","SearchDOM","processDom","highlightClass","charClass","targets","textNodes","charIndex","forEach","traverseToTextNode","processTextNode","node","nodeType","childNodes","span","wrap","empty","splitChars","unwrap","newHtml","innerHTML","matchCase","expression","RegExp","matches","resetMark","resetHighlight","resetMatchIndex","exec","startOffset","endOffset","highlightAll","mark","start","end","highlight","matchIndex","removeClass","removeAttr","currentIndex","wrapInner","contents","nextMatch","previousMatch","getMarkedIndex","getFirstMarked","eq","each","item","EXTENSIONS","svg","png","ErrorDialog","actions","dialogs","okText","_dialog","kendoDialog","getKendoDialog","center","ExportAsDialog","fileFormats","description","exportAsDialog","extension","_initializeDialog","autoFocus","resizable","modal","preventScroll","maxWidth","_updateModel","pagesCount","viewModel","set","dialogMessages","dialog","kendoWindow","getKendoWindow","observable","defaultFileName","SearchDialog","dialogElm","dialogOffset","top","position","left","Window","minHeight","draggable","dragHandle","activate","ev","searchModel","boundValue","searchText","matchCaseClick","prev","onKeyup","navigationFn","onInput","parseJSON","OPEN","ZOOMSTART","ZOOMEND","Command","OpenCommand","_upload","_initUpload","uploadOptions","select","_onSelect","_onSuccess","_onError","complete","_onComplete","showFileList","multiple","validation","allowedExtensions","async","saveUrl","autoUpload","saveField","kendoUpload","getKendoUpload","response","XMLHttpRequest","notSupported","fileToUpload","files","toLowerCase","fromFile","onerror","readAsArrayBuffer","rawFile","PageChangeCommand","DownloadCommand","info","ExportCommand","_saveDialog","_initDialog","exportImage","exportSVG","EnableSelectionCommand","_toggleSelection","EnablePanCommand","OpenSearchCommand","searchDialog","offset","_open","_next","_prev","_close","changeHandler","zoomStartHandler","_closeDialog","openFileHandler","_searchDOM","_initSearchDOM","searchEngine","unbind","_updateSearchModel","field","model","_scrollToMark","marked","scroller","_scroller","scrollElement","scrollTo","scrollLeft","ZoomCommand","updateViewer","loadedPagesHeight","_pageNum","containerHeight","clientHeight","updatedVisiblePagesCount","renderTasks","processingLib","_calculateZoom","scrollingStarted","_scrollingStarted","scrollTop","scrollHeight","_resize","zoomScale","pageHeight","_visiblePages","_visiblePagesCount","_loadVisiblePages","_triggerZoomEnd","preventZoom","viewerOptions","visibleCanvas","scaleValue","_allowResize","_autoFit","zoomRate","_autoZoomScale","zoomMin","zoomMax","PrintCommand","_renderPrintContainer","_loadAllPages","printContainer","interval","printHandler","originalScale","timeout","printImmediately","clearTimeout","setTimeout","_renderPrintPages","_printDocument","_renderPrintImage","div","img","toDataURL","myWindow","write","PLUS","MINUS","ZERO","NUMPAD_ZERO","SCROLL","ERROR","FOCUS","MOUSEWHEEL","UPDATE","ZOOM_SCALE","PAGE_CHANGE","ZOOMCOMMAND","WHITECOLOR","TABINDEX","PROCESSORS","enableTextSelection","enablePanning","PDFViewer","_wrapper","_renderToolbar","_initProcessor","_renderPageContainer","_loadDocument","_tabindex","notify","pdfjsProcessing","dplProcessing","loadOnDemand","defaultPageSize","togglePan","labels","saveAsType","save","inputLabel","_focus","_resizeHandler","onResize","plusShortcuts","NUMPAD_PLUS","minusShortcuts","NUMPAD_MINUS","zeroShortcuts","shouldExecute","ctrlKey","_blankPage","execute","processingOptions","toolbarOptions","toolbarElement","appendTo","_initErrorDialog","dialogInstance","_errorDialog","pagesData","viewerPage","pageData","_attachContainerEvents","_getVisiblePagesCount","containerWidth","_resizePages","clientWidth","currentRatio","max","_wheel","activeElement","mobile","Scroller","elastic","_scroll","pageToLoad","currentPage","currentPageTop","currentPageHeight","previousPage","prevPageTop","prevPageHeight","containerScrollHeight","containerScrollTop","containerOffsetTop","pageNum","pageIndex","pageToLoadNum","scrollDirection","_prevScrollTop","_preventScroll","abs","floor","originalEvent","delta","wheelDelta","detail","preventComboBoxChange","commandOptions","loadPage","scrollerTopPosition","scrollerTopOffset","pageTopOffset","pageMargin","minVisiblePageNum","maxVisiblePageNum","slice","promises","background","rootGroup","fromRect","color","forceProxy","proxyTarget","unbindResize","reset","userEvents","_shouldNotMove","_getTextLayers","plugin"],"mappings":"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","file":"kendo.pdfviewer.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('pdfviewer/pdfjs', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var extend = $.extend;\n        var isLoaded = function () {\n            if (!window.pdfjsLib) {\n                var console = window.console;\n                if (console && console.error) {\n                    console.error('PDF.JS required.');\n                }\n                return false;\n            }\n            kendo.pdfviewer.pdfjs.lib = window.pdfjsLib;\n            return true;\n        };\n        extend(kendo, {\n            pdfviewer: {\n                pdfjs: {\n                    lib: window.pdfjsLib,\n                    isLoaded: isLoaded\n                }\n            }\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/processors/pdfjs-processor', ['pdfviewer/pdfjs'], f);\n}(function () {\n    var __meta__ = {\n        id: 'pdfjs-processor',\n        name: 'PDFJS-Processor',\n        category: 'framework',\n        depends: ['core']\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, atob = window.atob, PDFJS;\n        var PDFJSProcessor = Class.extend({\n            init: function (options, viewer) {\n                var that = this;\n                if (kendo.pdfviewer.pdfjs.isLoaded()) {\n                    PDFJS = kendo.pdfviewer.pdfjs.lib;\n                }\n                that.file = options.file;\n                that.viewer = viewer;\n            },\n            fetchDocument: function () {\n                var that = this, deferred = $.Deferred(), messages = that.viewer.options.messages.errorMessages;\n                if (!that.file) {\n                    return deferred.resolve();\n                }\n                if (that._isBase64Data() && atob) {\n                    that.file.data = atob(that.file.data);\n                }\n                PDFJS.getDocument(this.file).promise.then(function (pdf) {\n                    var pageSizes = [];\n                    that.pdf = pdf;\n                    that.pagePromises = [];\n                    that._downloadData = $.Deferred();\n                    pdf.getData().then(function (data) {\n                        var blob = new Blob([data], { type: 'application/pdf' });\n                        that._downloadData.resolve({ file: blob });\n                    });\n                    for (var i = 1; i <= pdf.numPages; i++) {\n                        that.pagePromises.push(pdf.getPage(i));\n                    }\n                    Promise.all(that.pagePromises).then(function (pagePromises) {\n                        pageSizes = pagePromises.map(function (pagePromise) {\n                            var viewport = pagePromise.getViewport({ scale: 4 / 3 });\n                            return {\n                                width: viewport.width,\n                                height: viewport.height\n                            };\n                        });\n                        deferred.resolve({\n                            total: pdf.numPages,\n                            pages: pageSizes\n                        });\n                    }).catch(function (e) {\n                        that.viewer._triggerError({\n                            error: e.message,\n                            message: messages.parseError\n                        });\n                    });\n                }).catch(function (e) {\n                    var notFoundError = e.name.includes('Missing');\n                    var alertMessage = notFoundError ? messages.notFound : messages.parseError;\n                    that.viewer._triggerError({\n                        error: e.message,\n                        message: alertMessage\n                    });\n                    if (notFoundError) {\n                        that.viewer._renderBlankPage();\n                    }\n                });\n                return deferred;\n            },\n            fetchPageData: function (number) {\n                return this.pagePromises[number - 1];\n            },\n            downloadFile: function (fileName) {\n                var that = this;\n                kendo.ui.progress(that.viewer.pageContainer, true);\n                that._downloadData.done(function (result) {\n                    kendo.ui.progress(that.viewer.pageContainer, false);\n                    var reader = new FileReader();\n                    reader.readAsDataURL(result.file);\n                    reader.onload = function () {\n                        kendo.saveAs({\n                            dataURI: reader.result,\n                            fileName: fileName + '.pdf',\n                            proxyURL: function () {\n                                return reader.result;\n                            }\n                        });\n                    };\n                });\n            },\n            _updateDocument: function (file) {\n                this.pdf.loadingTask.destroy();\n                this.file = file;\n            },\n            _isBase64Data: function () {\n                var data = this.file.data, notBase64 = /[^A-Z0-9+\\/=]/i, length = data && data.length, equalSign;\n                if (!length || length % 4 !== 0 || notBase64.test(data)) {\n                    return false;\n                }\n                equalSign = data.indexOf('=');\n                return equalSign === -1 || equalSign === length - 1 || equalSign === length - 2 && data[length - 1] === '=';\n            },\n            renderTextLayer: function (params) {\n                PDFJS.renderTextLayer(params);\n            }\n        });\n        extend(kendo.pdfviewer.pdfjs, { processor: PDFJSProcessor });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/processors/dpl-processor', ['kendo.core'], f);\n}(function () {\n    var __meta__ = {\n        id: 'dpl-processor',\n        name: 'DPL-Processor',\n        category: 'framework',\n        depends: ['core']\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Class = kendo.Class;\n        var DPLProcessor = Class.extend({\n            init: function (options, viewer) {\n                var that = this;\n                that.options = options;\n                that.read = options.read;\n                that.upload = options.upload;\n                that.download = options.download;\n                that.viewer = viewer;\n            },\n            fetchDocument: function () {\n                var that = this, deferred = $.Deferred(), errorMessages = that.viewer.options.messages.errorMessages;\n                if (!that.read) {\n                    return deferred.resolve();\n                }\n                $.ajax({\n                    type: that.read.type,\n                    url: that.read.url,\n                    dataType: that.read.dataType,\n                    success: function (data) {\n                        if (typeof data != 'string') {\n                            data = kendo.stringify(data);\n                        }\n                        deferred.resolve(JSON.parse(data));\n                    },\n                    error: function (xhr) {\n                        that.viewer._triggerError({\n                            error: xhr.responseText,\n                            message: errorMessages.parseError\n                        });\n                    }\n                });\n                return deferred;\n            },\n            fetchPageData: function (number) {\n                var that = this;\n                var deferred = $.Deferred();\n                var page = that.viewer.document.pages[number - 1];\n                var data = {};\n                data[that.read.pageField] = number;\n                if (!page.geometries.length) {\n                    $.ajax({\n                        type: that.read.type,\n                        url: that.read.url,\n                        data: data,\n                        success: function (data) {\n                            deferred.resolve(JSON.parse(data));\n                        },\n                        error: function (xhr) {\n                            that.viewer._triggerError({\n                                error: xhr.responseText,\n                                message: that.viewer.options.messages.errorMessages.parseError\n                            });\n                        }\n                    });\n                } else {\n                    deferred.resolve(page);\n                }\n                return deferred;\n            },\n            downloadFile: function (fileName) {\n                window.location = this.download.url + '?file=' + fileName;\n            },\n            fromJSON: function (json) {\n                var viewer = this.viewer;\n                viewer._clearPages();\n                viewer.document = json;\n                viewer.document.total = viewer.document.pages.length;\n                viewer._renderPages();\n                viewer.resize(true);\n                viewer.activatePage(1);\n            }\n        });\n        extend(kendo.pdfviewer, { dpl: { processor: DPLProcessor } });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/pager', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var NS = '.kendoPDFViewer', Widget = kendo.ui.Widget, CHANGE = 'change', KEYDOWN = 'keydown', CLICK = kendo.support.click, SHRINKWIDTH = 480, kendoAttr = kendo.attr, proxy = $.proxy, extend = $.extend, DOT = '.';\n        var pagerStyles = {\n            wrapperClass: 'k-pager-wrap',\n            iconFirst: 'k-i-arrow-end-left',\n            iconLast: 'k-i-arrow-end-right',\n            iconPrev: 'k-i-arrow-60-left',\n            iconNext: 'k-i-arrow-60-right',\n            first: 'k-pager-first',\n            last: 'k-pager-last',\n            nav: 'k-pager-nav',\n            disabled: 'k-state-disabled'\n        };\n        var Pager = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that.linkTemplate = kendo.template(that.options.linkTemplate);\n                that.element.addClass(pagerStyles.wrapperClass);\n                that._renderLinks();\n                that._toggleDisabledClass();\n                that._attachEvents();\n            },\n            options: {\n                linkTemplate: '<a href=\"\\\\#\" aria-label=\"#=text#\" title=\"#=text#\" class=\"k-button k-button-icon k-flat k-pager-nav #= wrapClass #\" data-page=\"#=pageIdx#\"><span class=\"k-icon #= iconClass #\"></span></a>',\n                previousNext: true,\n                input: true,\n                page: 1,\n                total: 1,\n                messages: {}\n            },\n            events: [CHANGE],\n            _pagerLink: function (iconClass, text, pageIdx, wrapClass) {\n                return this.linkTemplate({\n                    iconClass: iconClass,\n                    text: text,\n                    wrapClass: wrapClass || '',\n                    pageIdx: pageIdx\n                });\n            },\n            _renderLinks: function () {\n                var that = this, options = that.options;\n                if (options.previousNext) {\n                    that.firstLink = $(that._pagerLink(pagerStyles.iconFirst, options.messages.first, 1, pagerStyles.first));\n                    that.prevLink = $(that._pagerLink(pagerStyles.iconPrev, options.messages.previous, options.page - 1));\n                    that.nextLink = $(that._pagerLink(pagerStyles.iconNext, options.messages.next, options.page + 1));\n                    that.lastLink = $(that._pagerLink(pagerStyles.iconLast, options.messages.last, options.total, pagerStyles.last));\n                }\n                that.element.append(that.firstLink);\n                that.element.append(that.prevLink);\n                if (options.input) {\n                    that._renderInput();\n                }\n                that.element.append(that.nextLink);\n                that.element.append(that.lastLink);\n            },\n            _toggleDisabledClass: function () {\n                var that = this, options = that.options, total = !options.total;\n                if (that.nextLink && that.prevLink) {\n                    that.prevLink.toggleClass(pagerStyles.disabled, total || options.page === 1);\n                    that.nextLink.toggleClass(pagerStyles.disabled, total || options.page === options.total);\n                    that.lastLink.toggleClass(pagerStyles.disabled, total || options.page === options.total);\n                    that.firstLink.toggleClass(pagerStyles.disabled, total || options.page === 1);\n                }\n                if (that.input) {\n                    that.input.toggleClass(pagerStyles.disabled, options.total <= 1);\n                }\n            },\n            _attachEvents: function () {\n                var that = this;\n                that.element.on(CLICK + NS, DOT + pagerStyles.nav, proxy(that._click, that));\n                that.element.on(KEYDOWN + NS, DOT + pagerStyles.nav, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        that._click(e);\n                        e.preventDefault();\n                    }\n                });\n                if (that.input) {\n                    that.input.on(KEYDOWN + NS, proxy(that._keydown, that));\n                }\n            },\n            _click: function (e) {\n                var target = $(e.currentTarget);\n                var page = parseInt(target.attr(kendoAttr('page')), 10);\n                if (e.isDefaultPrevented()) {\n                    return;\n                }\n                this._change(page);\n            },\n            _keydown: function (e) {\n                var key = e.keyCode, keys = kendo.keys, input = $(e.target), page = parseInt(input.val(), 10), upDown = key === keys.UP || key === keys.DOWN, allowedKeys = key === keys.RIGHT || key === keys.LEFT || key === keys.BACKSPACE || key === keys.DELETE, direction = upDown && key === keys.UP ? 1 : -1;\n                if (upDown) {\n                    page += direction;\n                }\n                if (key === keys.ENTER || upDown) {\n                    if (isNaN(page) || page < 1 || page > this.options.total) {\n                        page = this.options.page;\n                        input.val(page);\n                        return;\n                    }\n                    this._change(page);\n                    e.preventDefault();\n                } else if (!e.key.match(/^\\d+$/) && !allowedKeys) {\n                    e.preventDefault();\n                }\n            },\n            _change: function (page) {\n                var that = this;\n                if (page >= 1 && page <= that.options.total) {\n                    that.options.page = page;\n                    if (that.input) {\n                        that.input.val(page);\n                    }\n                    that.prevLink.attr(kendoAttr('page'), page - 1);\n                    that.nextLink.attr(kendoAttr('page'), page + 1);\n                    that._toggleDisabledClass();\n                }\n                that.trigger(CHANGE, { page: page });\n            },\n            setOptions: function (options) {\n                var that = this, prevTotal = that.options.total;\n                options = $.extend(that.options, options);\n                Widget.fn.setOptions.call(that, options);\n                if (options.input) {\n                    if (prevTotal != options.total) {\n                        that._renderInput();\n                        that.input.on(KEYDOWN + NS, proxy(that._keydown, that));\n                    } else {\n                        that.input.val(options.total > 0 ? options.page : 1);\n                    }\n                }\n                if (options.total > 1) {\n                    that.prevLink.attr(kendoAttr('page'), options.page - 1);\n                    that.nextLink.attr(kendoAttr('page'), options.page + 1);\n                    that.lastLink.attr(kendoAttr('page'), options.total);\n                }\n                that._toggleDisabledClass();\n            },\n            _renderInput: function () {\n                var that = this, totalMessage, options = that.options, shouldShrink = that.element.parent().width() <= SHRINKWIDTH, inputTemplate, pagerInputWrap = that.element.find('.k-pager-input');\n                if (that.input) {\n                    that.input.off(NS);\n                }\n                totalMessage = options.total > 0 ? kendo.format(options.messages.of, options.total) : '';\n                if (!shouldShrink) {\n                    totalMessage += options.total > 1 ? options.messages.pages : options.messages.page;\n                }\n                inputTemplate = '<input class=\"k-textbox\" aria-label=\"' + options.page + totalMessage + '\">' + totalMessage;\n                if (pagerInputWrap.length) {\n                    pagerInputWrap.html(inputTemplate);\n                } else {\n                    that.element.append('<span class=\"k-pager-input k-label\">' + inputTemplate + '</span>');\n                }\n                that.input = that.element.find('input').val(options.total > 0 ? options.page : 1);\n            },\n            destroy: function () {\n                this.element.off(NS);\n                if (this.input) {\n                    this.input.off(NS);\n                }\n                Widget.fn.destroy.call(this);\n            }\n        });\n        extend(kendo.pdfviewer, { Pager: Pager });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/toolbar', [\n        'kendo.toolbar',\n        'kendo.combobox',\n        'pdfviewer/pager'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, ACTION = 'action', FLATBUTTONCLASS = 'k-flat', KEYDOWN = 'keydown', CLICK = kendo.support.click, CHANGE = 'change', ZOOMIN = 'zoomin', ZOOMOUT = 'zoomout', Item = kendo.toolbar.Item, ToolBar = kendo.ui.ToolBar, PREDEFINED_ZOOM_VALUES = {\n                auto: 'auto',\n                actual: 'actual',\n                fitToWidth: 'fitToWidth',\n                fitToPage: 'fitToPage'\n            }, styles = {\n                zoomOutIcon: 'k-i-zoom-out',\n                zoomInIcon: 'k-i-zoom-in',\n                zoomButtons: 'k-button-icon k-flat',\n                zoomOverflowButtons: 'k-button-icontext k-overflow-button',\n                overflowHidden: 'k-overflow-hidden'\n            };\n        var ZOOM_BUTTON_TEMPLATE = kendo.template('<a href=\"\\\\#\" aria-label=\"#=text#\" title=\"#=text#\" data-command=\"#=command#\" class=\"k-button #=className#\"><span class=\"k-icon #= iconClass #\"></span> ${showText ? text : \"\"}</a>');\n        var ZOOM_COMBOBOX_TEMPLATE = kendo.template('<select>' + '#for(var zoomIndex in zoomLevels){#' + '# var zoomLevel = zoomLevels[zoomIndex]; #' + '<option value=\"#= zoomLevel.percent || (zoomLevel + \"%\") #\">${zoomLevel.text ? zoomLevel.text : zoomLevel + \"%\"}</option>' + '#}#' + '</select>');\n        var DefaultTools = {\n            pager: {\n                type: 'pager',\n                overflow: 'never',\n                command: 'PageChangeCommand'\n            },\n            spacer: { type: 'spacer' },\n            zoom: {\n                type: 'zoom',\n                command: 'ZoomCommand',\n                zoomInOut: true,\n                combobox: {\n                    zoomLevels: [\n                        50,\n                        100,\n                        150,\n                        200,\n                        300,\n                        400\n                    ]\n                }\n            },\n            toggleSelection: {\n                type: 'buttonGroup',\n                attributes: { 'class': 'k-toggle-selection-group' },\n                buttons: [\n                    {\n                        togglable: true,\n                        text: 'Enable Selection',\n                        command: 'EnableSelectionCommand',\n                        icon: 'cursor',\n                        showText: 'overflow',\n                        name: 'toggleSelection',\n                        group: 'toggle-pan'\n                    },\n                    {\n                        togglable: true,\n                        text: 'Enable Panning',\n                        command: 'EnablePanCommand',\n                        icon: 'hand',\n                        showText: 'overflow',\n                        name: 'togglePan',\n                        group: 'toggle-pan',\n                        selected: true\n                    }\n                ]\n            },\n            spacer2: { type: 'spacer' },\n            search: {\n                type: 'button',\n                text: 'Search',\n                command: 'OpenSearchCommand',\n                icon: 'search',\n                name: 'search',\n                showText: 'overflow'\n            },\n            open: {\n                type: 'button',\n                text: 'Open',\n                showText: 'overflow',\n                name: 'open',\n                icon: 'folder-open',\n                command: 'OpenCommand'\n            },\n            download: {\n                type: 'button',\n                text: 'Download',\n                showText: 'overflow',\n                name: 'download',\n                icon: 'download',\n                command: 'DownloadCommand'\n            },\n            print: {\n                type: 'button',\n                text: 'Print',\n                showText: 'overflow',\n                name: 'print',\n                icon: 'print',\n                command: 'PrintCommand'\n            }\n        };\n        var AllTools = extend({}, DefaultTools, {\n            exportAs: {\n                type: 'button',\n                text: 'Export',\n                showText: 'overflow',\n                name: 'exportAs',\n                icon: 'image-export',\n                command: 'ExportCommand'\n            }\n        });\n        var ToolbarPager = Item.extend({\n            init: function (options, toolbar) {\n                var pagerElement = $('<div />');\n                this.options = extend(true, options, toolbar.options.pager);\n                this.toolbar = toolbar;\n                this.toolbar.pager = new kendo.pdfviewer.Pager(pagerElement, extend({}, options, { change: proxy(this._change, this) }));\n                this.element = pagerElement;\n                this.element.on(KEYDOWN, proxy(this._keydown, this));\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowAttr();\n            },\n            _change: function (e) {\n                if (this.options.change && this.options.change(e.page)) {\n                    return;\n                }\n                this.toolbar.action({\n                    command: 'PageChangeCommand',\n                    options: { value: e.page }\n                });\n            },\n            _keydown: function (e) {\n                var that = this, target = $(e.target), keyCode = e.keyCode, children = that.element.find(':kendoFocusable'), targetIndex = children.index(target), direction = e.shiftKey ? -1 : 1;\n                if (keyCode === kendo.keys.TAB && children[targetIndex + direction]) {\n                    children[targetIndex + direction].focus();\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n        });\n        kendo.toolbar.registerComponent('pager', ToolbarPager);\n        function appendZoomButtons(element, messages, isOverflow) {\n            var className = isOverflow ? styles.zoomOverflowButtons : styles.zoomButtons;\n            element.append(ZOOM_BUTTON_TEMPLATE({\n                text: messages.zoomOut,\n                command: ZOOMOUT,\n                iconClass: styles.zoomOutIcon,\n                showText: isOverflow,\n                className: className\n            }));\n            element.append(ZOOM_BUTTON_TEMPLATE({\n                text: messages.zoomIn,\n                command: ZOOMIN,\n                iconClass: styles.zoomInIcon,\n                showText: isOverflow,\n                className: className\n            }));\n        }\n        var ToolBarZoom = Item.extend({\n            init: function (options, toolbar) {\n                this._init(options, toolbar);\n                this.toolbar.zoom = this;\n                if (toolbar.options.scale) {\n                    this._initValue = toolbar.options.scale * 100 + '%';\n                }\n                this._appendElements();\n                this._click = kendo.throttle(this._click.bind(this), 200);\n                this._keydown = kendo.throttle(this._keydown.bind(this), 200);\n                this.element.on(CLICK, '.k-button', this._click);\n                this.element.on(KEYDOWN, '.k-button', this._keydown);\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowAttr();\n            },\n            _init: function (options, toolbar) {\n                var zoomElement = $('<div />');\n                this.options = extend(true, options, { messages: toolbar.options.messages.zoom });\n                this.toolbar = toolbar;\n                this.element = zoomElement;\n            },\n            _appendElements: function () {\n                var options = this.options;\n                if (options.zoomInOut) {\n                    appendZoomButtons(this.element, options.messages, false);\n                }\n                if (options.combobox) {\n                    this._buildComboBox();\n                }\n            },\n            _buildComboBox: function () {\n                var that = this, combobox, messages = that.options.messages, comboOptions = that.options.combobox, zoomLevels = [\n                        {\n                            percent: PREDEFINED_ZOOM_VALUES.auto,\n                            text: messages.autoWidth\n                        },\n                        {\n                            percent: PREDEFINED_ZOOM_VALUES.actual,\n                            text: messages.actualWidth\n                        },\n                        {\n                            percent: PREDEFINED_ZOOM_VALUES.fitToWidth,\n                            text: messages.fitToWidth\n                        },\n                        {\n                            percent: PREDEFINED_ZOOM_VALUES.fitToPage,\n                            text: messages.fitToPage\n                        }\n                    ];\n                zoomLevels = zoomLevels.concat(comboOptions.zoomLevels);\n                combobox = $(ZOOM_COMBOBOX_TEMPLATE({ zoomLevels: zoomLevels }));\n                if (!kendo.support.mobileOS) {\n                    combobox = combobox.kendoComboBox(extend({\n                        autoWidth: true,\n                        clearButton: false,\n                        value: that._initValue\n                    }, comboOptions)).getKendoComboBox();\n                    that.element.append(combobox.wrapper);\n                    that.combobox = combobox;\n                    that._currentValue = combobox.value();\n                } else {\n                    that.element.append(combobox);\n                }\n                combobox.bind(CHANGE, kendo.throttle(that.change.bind(that), 300));\n            },\n            change: function (e) {\n                var value = e.sender ? e.sender.value() : e.target.value, parsedValue;\n                if (value.toString().match(/^[0-9]+%?$/)) {\n                    parsedValue = parseInt(value.replace('%', ''), 10) / 100;\n                } else if (!PREDEFINED_ZOOM_VALUES[value]) {\n                    if (this.combobox) {\n                        this.combobox.value(this._currentValue);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n                this._currentValue = value;\n                this.toolbar.action({\n                    command: 'ZoomCommand',\n                    options: { scale: parsedValue || value }\n                });\n            },\n            _buttonCommand: function (target) {\n                var button = $(target).closest('.k-button'), command = button.data('command');\n                this.toolbar.action({\n                    command: 'ZoomCommand',\n                    options: {\n                        zoomIn: command === ZOOMIN,\n                        zoomOut: command === ZOOMOUT,\n                        updateComboBox: true\n                    }\n                });\n            },\n            _click: function (e) {\n                this._buttonCommand(e.target);\n            },\n            _keydown: function (e) {\n                var key = e.keyCode, keys = kendo.keys;\n                if (key === keys.ENTER) {\n                    this._buttonCommand(e.target);\n                    e.preventDefault();\n                }\n            },\n            enable: function (value) {\n                var element = this.element;\n                element.find('.k-button, select').toggleClass('k-state-disabled', !value);\n                if (this.combobox) {\n                    this.combobox.enable(value);\n                }\n            },\n            destroy: function () {\n                if (this.combobox) {\n                    this.combobox.destroy();\n                }\n            }\n        });\n        var ToolBarOverflowZoom = ToolBarZoom.extend({\n            _init: function (options, toolbar) {\n                var zoomElement = $('<li></li>');\n                this.options = extend(true, options, { messages: toolbar.options.messages.zoom });\n                this.toolbar = toolbar;\n                this.element = zoomElement;\n            },\n            _appendElements: function () {\n                var options = this.options;\n                if (options.zoomInOut) {\n                    appendZoomButtons(this.element, options.messages, true);\n                }\n            },\n            overflowHidden: function () {\n                this.element.addClass(styles.overflowHidden);\n            }\n        });\n        kendo.toolbar.registerComponent('zoom', ToolBarZoom, ToolBarOverflowZoom);\n        var ViewerToolBar = ToolBar.extend({\n            init: function (element, options) {\n                var that = this;\n                var items = options.items && options.items.length ? options.items : Object.keys(DefaultTools);\n                that.options = options;\n                options.items = that._updateItems(items);\n                ToolBar.fn.init.call(that, element, options);\n                that.bind({\n                    click: that._click,\n                    toggle: that._click\n                });\n                options.viewer.bind({ update: that._update.bind(that) });\n            },\n            events: [ACTION],\n            _updateItems: function (items) {\n                var that = this;\n                var messages = this.options.messages;\n                return items.map(function (tool) {\n                    var isBuiltInTool = $.isPlainObject(tool) && Object.keys(tool).length === 1 && tool.name;\n                    tool = isBuiltInTool ? tool.name : tool;\n                    var toolOptions = $.isPlainObject(tool) ? tool : AllTools[tool];\n                    var options;\n                    var toolName = toolOptions.name;\n                    if (toolOptions.type === 'buttonGroup') {\n                        toolOptions.buttons = that._updateItems(toolOptions.buttons);\n                    } else if (toolOptions.type !== 'pager') {\n                        options = {\n                            name: toolName,\n                            attributes: {\n                                'aria-label': messages[toolName],\n                                'title': messages[toolName],\n                                'data-command': toolOptions.command,\n                                'class': FLATBUTTONCLASS\n                            },\n                            overflow: toolOptions.overflow\n                        };\n                    } else {\n                        options = { overflow: 'never' };\n                    }\n                    kendo.deepExtend(toolOptions, options);\n                    return toolOptions;\n                });\n            },\n            _click: function (e) {\n                var command = $(e.target).data('command');\n                if (!command) {\n                    return;\n                }\n                this.action({\n                    command: command,\n                    options: e.options\n                });\n            },\n            _update: function (e) {\n                var pageOptions = {\n                    page: e.page || 1,\n                    total: e.total || 1\n                };\n                if (this.zoom) {\n                    this.zoom.enable(!e.isBlank);\n                    if (e.action === 'zoom') {\n                        this._updateZoomComboBox(e.zoom);\n                    }\n                }\n                if ((e.action === 'pagechange' || e.isBlank) && this.pager) {\n                    this.pager.setOptions(pageOptions);\n                }\n                this.enable(this.wrapper.find('.k-toggle-selection-group'), !e.isBlank);\n                this.enable(this.wrapper.find('[data-command=\\'OpenSearchCommand\\']'), !e.isBlank);\n                this.enable(this.wrapper.find('[data-command=\\'DownloadCommand\\']'), !e.isBlank);\n                this.enable(this.wrapper.find('[data-command=\\'PrintCommand\\']'), !e.isBlank);\n            },\n            _updateZoomComboBox: function (value) {\n                var isPredefined = value === PREDEFINED_ZOOM_VALUES.auto || value === PREDEFINED_ZOOM_VALUES.actual;\n                if (!isPredefined) {\n                    value = Math.round(value * 100) + '%';\n                }\n                if (this.zoom && this.zoom.combobox) {\n                    this.zoom._currentValue = value;\n                    this.zoom.combobox.value(value);\n                }\n            },\n            action: function (args) {\n                this.trigger(ACTION, args);\n            },\n            destroy: function () {\n                if (this.pager) {\n                    this.pager.destroy();\n                }\n                if (this.zoom) {\n                    this.zoom.destroy();\n                }\n                ToolBar.fn.destroy.call(this);\n            }\n        });\n        extend(kendo.pdfviewer, {\n            Toolbar: ViewerToolBar,\n            DefaultTools: DefaultTools\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (!text) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/page', ['kendo.drawing'], f);\n}(function () {\n    (function ($, undefined) {\n        var extend = $.extend, noop = $.noop, drawing = kendo.drawing, Group = drawing.Group, Surface = drawing.Surface, RENDER = 'render', Class = kendo.Class;\n        var geometryTypes = {\n            Path: 'path',\n            MultiPath: 'multipath',\n            Rect: 'rect',\n            Image: 'image',\n            Text: 'text'\n        };\n        var Page = Class.extend({\n            init: function (options, viewer) {\n                this.viewer = viewer;\n                this.processor = options.processor;\n                this.options = options;\n                this.pageNumber = options.number;\n                this.element = $('<div class=\\'k-page\\' />');\n                this.element.attr(kendo.attr('number'), this.pageNumber);\n                this._updatePageSize(options);\n                this.width = options.width;\n                this.height = options.height;\n            },\n            resize: function (ratio) {\n                var pageElement = this.element;\n                this._updatePageSize({\n                    width: Math.min(pageElement.width() * ratio, this.width),\n                    height: Math.min(pageElement.height() * ratio, this.height)\n                });\n            },\n            _updatePageSize: function (size) {\n                this.element.width(size.width).height(size.height);\n            },\n            destroy: function () {\n                kendo.destroy(this.element);\n            },\n            render: noop\n        });\n        var DPLPage = Page.extend({\n            draw: function () {\n                var that = this, geometries = that.options.geometries;\n                that.group = new Group();\n                that.surface.draw(that.group);\n                that._drawGeometries(geometries);\n                that.viewer.trigger(RENDER, { page: this });\n                kendo.ui.progress(that.element, false);\n            },\n            load: function () {\n                var that = this;\n                if (that.loaded || !that.processor) {\n                    return;\n                }\n                that.processor.fetchPageData(that.pageNumber).then(function (data) {\n                    that.options = data;\n                    that._initSurface();\n                    that.draw();\n                });\n                that.loaded = true;\n            },\n            _initSurface: function () {\n                var size = {\n                    width: this.element.width(),\n                    height: this.element.height()\n                };\n                var surfaceOptions = extend({\n                    width: this.width,\n                    height: this.height\n                }, this.viewer.options.view);\n                this.surface = new Surface(this.element, surfaceOptions);\n                this._updatePageSize(size);\n            },\n            _drawGeometries: function (geometries) {\n                var that = this, kGeometry;\n                if (!geometries) {\n                    return;\n                }\n                for (var i = 0; i <= geometries.length; i++) {\n                    var geometry = geometries[i];\n                    if (!geometry) {\n                        continue;\n                    }\n                    switch (geometry.type) {\n                    case geometryTypes.Path:\n                    case geometryTypes.MultiPath:\n                        kGeometry = that._drawPath(geometry);\n                        break;\n                    case geometryTypes.Rect:\n                        kGeometry = that._drawRect(geometry);\n                        break;\n                    case geometryTypes.Image:\n                        kGeometry = that._drawImage(geometry);\n                        break;\n                    case geometryTypes.Text:\n                        kGeometry = that._drawText(geometry);\n                        break;\n                    default:\n                        kGeometry = null;\n                        break;\n                    }\n                    if (kGeometry) {\n                        that.group.append(kGeometry);\n                    }\n                }\n            },\n            _drawRect: function (geometry) {\n                var rectGeo = new kendo.geometry.Rect(geometry.point, geometry.size);\n                return new drawing.Rect(rectGeo, {\n                    transform: this._getMatrix(geometry.transform),\n                    fill: geometry.fillOptions,\n                    stroke: geometry.strokeOptions\n                });\n            },\n            _drawImage: function (geometry) {\n                var imageRect = new kendo.geometry.Rect(geometry.point, geometry.size);\n                return new drawing.Image(geometry.src, imageRect, { transform: this._getMatrix(geometry.transform) });\n            },\n            _drawText: function (geometry) {\n                var options = {\n                    transform: this._getMatrix(geometry.transform),\n                    stroke: geometry.strokeOptions,\n                    fill: geometry.fillOptions,\n                    font: geometry.font\n                };\n                return new kendo.drawing.Text(geometry.content, geometry.point, options);\n            },\n            _drawPath: function (geometry) {\n                var options = {\n                    transform: this._getMatrix(geometry.transform),\n                    stroke: geometry.strokeOptions,\n                    fill: geometry.fillOptions\n                };\n                var path = new drawing.MultiPath(options);\n                for (var i = 0; i < geometry.paths.length; i++) {\n                    var subPath = geometry.paths[i];\n                    if (!subPath.segments) {\n                        return;\n                    }\n                    path.moveTo.apply(path, subPath.point);\n                    for (var j = 0; j < subPath.segments.length; j++) {\n                        var segment = subPath.segments[j];\n                        var drawAction = segment.points.length === 1 ? path.lineTo : path.curveTo;\n                        drawAction.apply(path, segment.points);\n                    }\n                    if (subPath.closed) {\n                        path.close();\n                    }\n                }\n                return path;\n            },\n            _getMatrix: function (transform) {\n                var matrix = Object.create(kendo.geometry.Matrix.prototype);\n                kendo.geometry.Matrix.apply(matrix, transform);\n                return matrix;\n            }\n        });\n        var PDFJSPage = Page.extend({\n            init: function (options, viewer) {\n                var that = this, canvas;\n                canvas = $('<canvas style=\\'width: 100%; height: 100%;\\' />');\n                that.canvas = canvas.get(0);\n                Page.fn.init.call(that, options, viewer);\n                that.canvas.width = that.width;\n                that.canvas.height = that.height;\n                that.element.append(canvas);\n            },\n            load: function (defaultScale, force) {\n                var that = this;\n                if (that._scale === defaultScale && !force) {\n                    return;\n                } else if (that._scale && that._scale !== defaultScale && !force) {\n                    that._scale = defaultScale;\n                    that.render(defaultScale);\n                    return;\n                }\n                if (that.processor) {\n                    that.processor.fetchPageData(that.pageNumber).then(function (page) {\n                        that._page = page;\n                        return that.render(defaultScale).then(function () {\n                            that.viewer.trigger(RENDER, { page: that });\n                        });\n                    });\n                }\n                that._scale = defaultScale;\n                that.loaded = true;\n            },\n            render: function (scale) {\n                var that = this;\n                var context = this.canvas.getContext('2d'), viewport = this._page.getViewport({ scale: scale });\n                this._scale = scale;\n                this.canvas.width = viewport.width;\n                this.canvas.height = viewport.height;\n                if (this._renderTask) {\n                    this._renderTask.cancel();\n                    this._renderTask = null;\n                }\n                this._updatePageSize({\n                    width: viewport.width,\n                    height: viewport.height\n                });\n                this._renderTask = this._page.render({\n                    canvasContext: context,\n                    viewport: viewport\n                });\n                this._renderTextLayer(viewport);\n                return this._renderTask.promise.then(function () {\n                    that._renderTask = null;\n                }).catch(function () {\n                });\n            },\n            _renderTextLayer: function (viewport) {\n                var that = this;\n                var page = that._page;\n                if (that.textLayer) {\n                    that.textLayer.remove();\n                }\n                that.textLayer = $('<div class=\\'k-text-layer\\'></div>').get(0);\n                that.element.append(that.textLayer);\n                page.getTextContent({ normalizeWhitespace: true }).then(function (textContent) {\n                    $(that.textLayer).css({\n                        height: viewport.height,\n                        width: viewport.width\n                    }).html('');\n                    var params = {\n                        textContent: textContent,\n                        container: that.textLayer,\n                        viewport: viewport,\n                        textDivs: [],\n                        enhanceTextSelection: true\n                    };\n                    that.processor.renderTextLayer(params);\n                });\n            }\n        });\n        extend(kendo.pdfviewer.dpl, {\n            geometryTypes: geometryTypes,\n            Page: DPLPage\n        });\n        extend(kendo.pdfviewer.pdfjs, { Page: PDFJSPage });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/search', ['kendo.core'], f);\n}(function () {\n    (function ($, undefined) {\n        var Class = kendo.Class, extend = $.extend, isArray = $.isArray;\n        var SearchDOM = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.processDom();\n            },\n            options: {\n                highlightClass: 'k-search-highlight',\n                charClass: 'k-text-char'\n            },\n            processDom: function () {\n                var that = this;\n                that.targets = isArray(that.options.target) ? that.options.target : [that.options.target];\n                that.textNodes = [];\n                that.charIndex = 0;\n                that.text = '';\n                that.targets.forEach(function (target) {\n                    that.traverseToTextNode(target);\n                });\n                for (var i = 0; i < that.textNodes.length; i++) {\n                    that.processTextNode(that.textNodes[i]);\n                }\n            },\n            traverseToTextNode: function (node) {\n                var that = this;\n                if (node.nodeType === 3) {\n                    that.textNodes.push(node);\n                } else {\n                    for (var i = 0; i < node.childNodes.length; i++) {\n                        that.traverseToTextNode(node.childNodes[i]);\n                    }\n                }\n            },\n            processTextNode: function (node) {\n                var that = this;\n                var text = node.textContent;\n                var span;\n                that.text = that.text + text;\n                if (text.length > 0) {\n                    span = $(node).wrap('<span>').parent();\n                    span.empty();\n                    that.splitChars(span.get(0), text);\n                    span.children().unwrap();\n                }\n            },\n            splitChars: function (span, text) {\n                var that = this;\n                var newHtml = '';\n                for (var i = 0; i < text.length; i++) {\n                    newHtml = newHtml + '<span class=\\'' + that.options.charClass + '\\' ' + kendo.attr('char-index') + '=' + that.charIndex + '>' + text[i] + '</span>';\n                    that.charIndex++;\n                }\n                span.innerHTML = newHtml;\n            },\n            search: function (value, matchCase) {\n                var that = this;\n                var expression = new RegExp(value, !matchCase ? 'gi' : 'g');\n                var match;\n                that.matches = [];\n                that.resetMark();\n                that.resetHighlight();\n                that.resetMatchIndex();\n                if (value === '') {\n                    return;\n                }\n                match = expression.exec(that.text);\n                while (match) {\n                    that.matches.push({\n                        startOffset: match.index,\n                        endOffset: match.index + match[0].length\n                    });\n                    match = expression.exec(that.text);\n                }\n                that.highlightAll();\n                that.mark();\n            },\n            highlightAll: function () {\n                var that = this;\n                that.matches.forEach(function (match, index) {\n                    var start = match.startOffset;\n                    var end = match.endOffset;\n                    that.highlight(start, end, index + 1);\n                });\n            },\n            highlight: function (start, end, matchIndex) {\n                var that = this;\n                for (var i = start; i < end; i++) {\n                    $(that.targets).find('.' + that.options.charClass + '[' + kendo.attr('char-index') + '=' + i + ']').addClass(that.options.highlightClass).attr(kendo.attr('match-index'), matchIndex);\n                }\n            },\n            resetHighlight: function () {\n                var that = this;\n                $(that.targets).find('.' + that.options.highlightClass).removeClass(that.options.highlightClass);\n            },\n            resetMatchIndex: function () {\n                var that = this;\n                $(that.targets).find('.' + that.options.charClass + '[' + kendo.attr('match-index') + ']').removeAttr(kendo.attr('match-index'));\n            },\n            mark: function () {\n                var that = this;\n                if (!that.currentIndex && that.currentIndex !== 0) {\n                    that.currentIndex = 0;\n                } else if (that.currentIndex > that.matches.length) {\n                    that.currentIndex = that.matches.length;\n                } else {\n                    that.resetMark();\n                }\n                $(that.targets).find('.' + that.options.charClass + '[' + kendo.attr('match-index') + '=' + that.currentIndex + ']').wrapInner('<mark>');\n            },\n            resetMark: function () {\n                var that = this;\n                $(that.targets).find('mark').contents().unwrap();\n            },\n            nextMatch: function () {\n                var that = this;\n                that.currentIndex++;\n                if (that.currentIndex > that.matches.length) {\n                    that.currentIndex = 1;\n                }\n                that.mark();\n            },\n            previousMatch: function () {\n                var that = this;\n                that.currentIndex--;\n                if (that.currentIndex < 1) {\n                    that.currentIndex = that.matches.length;\n                }\n                that.mark();\n            },\n            getMarkedIndex: function () {\n                return this.matches.length ? this.currentIndex : 0;\n            },\n            getFirstMarked: function () {\n                return $(this.targets).find('mark').eq(0);\n            },\n            destroy: function () {\n                var that = this;\n                that.resetMark();\n                $(that.targets).children('span:not(.' + that.options.charClass + ')').each(function (i, item) {\n                    $(item).text($(item).text());\n                });\n            }\n        });\n        extend(kendo.pdfviewer, { SearchDOM: SearchDOM });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/dialogs', [\n        'kendo.dialog',\n        'kendo.window',\n        'kendo.binder',\n        'kendo.numerictextbox',\n        'kendo.dropdownlist'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Class = kendo.Class, EXTENSIONS = {\n                svg: '.svg',\n                png: '.png'\n            }, keys = kendo.keys;\n        var ErrorDialog = Class.extend({\n            init: function (options) {\n                this.options = extend(options, { actions: [{ text: options.messages.dialogs.okText }] });\n                this._dialog = $('<div />').kendoDialog(this.options).getKendoDialog();\n            },\n            open: function () {\n                this._dialog.center().open();\n            }\n        });\n        var ExportAsDialog = Class.extend({\n            init: function (options) {\n                this.options = extend(options, this.options, {\n                    fileFormats: [\n                        {\n                            description: options.messages.dialogs.exportAsDialog.png,\n                            extension: EXTENSIONS.png\n                        },\n                        {\n                            description: options.messages.dialogs.exportAsDialog.svg,\n                            extension: EXTENSIONS.svg\n                        }\n                    ],\n                    title: options.messages.dialogs.exportAsDialog.title,\n                    open: function () {\n                        this.center();\n                    }\n                });\n                this._initializeDialog();\n                return this;\n            },\n            options: {\n                extension: EXTENSIONS.png,\n                autoFocus: true,\n                resizable: false,\n                modal: { preventScroll: true },\n                width: '90%',\n                maxWidth: 520,\n                template: '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.fileName #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input class=\\'k-textbox\\' data-bind=\\'value: name\\' />' + '</div>' + '<div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<select data-role=\\'dropdownlist\\' class=\\'k-file-format\\' ' + 'data-text-field=\\'description\\' ' + 'data-value-field=\\'extension\\' ' + 'data-bind=\\'value: extension, source: fileFormats\\' />' + '</div>' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.page #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input data-role=\\'numerictextbox\\' data-format=\\'n0\\' data-min=\\'1\\' data-max=\\'#: total #\\' data-bind=\\'value: page\\' />' + '</div>' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#: messages.save #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>#: messages.cancel #</button>' + '</div>'\n            },\n            _updateModel: function (options) {\n                if (options.pagesCount) {\n                    this.viewModel.set('pagesCount', options.pagesCount);\n                }\n                if (options.page) {\n                    this.viewModel.set('page', options.page);\n                }\n            },\n            _initializeDialog: function () {\n                var that = this;\n                var options = that.options;\n                var dialogMessages = options.messages.dialogs;\n                var dialog = $('<div class=\\'k-pdf-viewer-window k-action-window k-popup-edit-form\\' />').append(kendo.template(options.template)({\n                    total: options.pagesCount,\n                    messages: dialogMessages\n                })).kendoWindow(options).getKendoWindow();\n                that.viewModel = kendo.observable({\n                    title: dialogMessages.exportAsDialog.title,\n                    name: dialogMessages.exportAsDialog.defaultFileName,\n                    extension: options.extension,\n                    fileFormats: options.fileFormats,\n                    pagesCount: options.pagesCount,\n                    page: 1,\n                    apply: that.apply.bind(this),\n                    close: function () {\n                        dialog.close();\n                    }\n                });\n                that._dialog = dialog;\n                kendo.bind(dialog.element, that.viewModel);\n                return dialog;\n            },\n            open: function () {\n                this._dialog.center().open();\n            },\n            apply: function () {\n                this._dialog.close();\n                this.options.apply({\n                    fileName: this.viewModel.name + this.viewModel.extension,\n                    extension: this.viewModel.extension,\n                    page: this.viewModel.page\n                });\n            }\n        });\n        var SearchDialog = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, options, that.options);\n            },\n            options: {\n                resizable: false,\n                template: '<div class=\\'k-search-container\\'>' + '<button class=\\'k-button k-button-icon k-flat k-search-dialog-draghandle\\'><span class=\\'k-icon k-i-handler-drag\\'></span></button>' + '<span class=\\'k-textbox\\'>' + '<input class=\\'k-search-dialog-input\\' data-bind=\\'value: boundValue, events: { keyup: onKeyup, input: onInput }\\' aria-label=\\'#: messages.inputLabel #\\' title=\\'#: messages.inputLabel #\\' />' + '<button class=\\'k-button k-button-icon k-flat k-match-case-button\\' data-bind=\\'css: {k-state-selected: matchCase}, click: matchCaseClick\\' aria-label=\\'#: messages.matchCase #\\' title=\\'#: messages.matchCase #\\'><span class=\\'k-icon k-i-convert-lowercase\\'></span></button>' + '</span>' + '<span class=\\'k-search-matches\\'><span data-bind=\\'text: matchIndex\\'></span> #: messages.of # <span data-bind=\\'text: matches\\'></span></span>' + '<button class=\\'k-button k-button-icon k-flat\\' data-bind=\\'click: prev\\' aria-label=\\'#: messages.previous #\\' title=\\'#: messages.previous #\\'><span class=\\'k-icon k-i-arrow-up\\'></span></button>' + '<button class=\\'k-button k-button-icon k-flat\\' data-bind=\\'click: next\\' aria-label=\\'#: messages.next #\\' title=\\'#: messages.next #\\'><span class=\\'k-icon k-i-arrow-down\\'></span></button>' + '<button class=\\'k-button k-button-icon k-flat\\' data-bind=\\'click: close\\' aria-label=\\'#: messages.close #\\' title=\\'#: messages.close #\\'><span class=\\'k-icon k-i-close\\'></<span></button>' + '</div>'\n            },\n            open: function () {\n                var that = this;\n                if (!that.dialog) {\n                    that._initializeDialog();\n                }\n                that.dialog.open();\n            },\n            _initializeDialog: function () {\n                var that = this;\n                var template = kendo.template(that.options.template);\n                var dialogElm = $('<div class=\\'k-pdf-viewer-search-dialog\\'></div>').append(template({ messages: that.options.messages }));\n                var dialogOffset = {\n                    top: that.options.position.top + 16,\n                    left: that.options.position.left + 16\n                };\n                that.dialog = new kendo.ui.Window(dialogElm, extend({}, that.options, {\n                    autoFocus: false,\n                    title: false,\n                    position: {\n                        top: dialogOffset.top,\n                        left: dialogOffset.left\n                    },\n                    minHeight: 30,\n                    draggable: { dragHandle: '.k-search-dialog-draghandle' },\n                    activate: function (ev) {\n                        ev.sender.element.find('.k-search-dialog-input').focus();\n                    }\n                }));\n                that.searchModel = kendo.observable({\n                    boundValue: '',\n                    searchText: '',\n                    matchCase: false,\n                    matchIndex: 0,\n                    matches: 0,\n                    matchCaseClick: function () {\n                        this.set('matchCase', !this.matchCase);\n                    },\n                    next: that.options.next,\n                    prev: that.options.prev,\n                    close: function () {\n                        this.set('boundValue', '');\n                        that.dialog.close();\n                    },\n                    onKeyup: function (ev) {\n                        var key = ev.keyCode;\n                        var navigationFn = ev.shiftKey ? this.prev : this.next;\n                        if (key === keys.ENTER) {\n                            navigationFn();\n                            ev.preventDefault();\n                        }\n                    },\n                    onInput: function (ev) {\n                        this.set('searchText', ev.target.value);\n                    }\n                });\n                kendo.bind(that.dialog.element, that.searchModel);\n            }\n        });\n        extend(kendo.pdfviewer, {\n            dialogs: {\n                ErrorDialog: ErrorDialog,\n                ExportAsDialog: ExportAsDialog,\n                SearchDialog: SearchDialog\n            }\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('pdfviewer/commands', ['kendo.upload'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, proxy = $.proxy, extend = $.extend, parseJSON = $.parseJSON, progress = kendo.ui.progress, Class = kendo.Class, OPEN = 'open', ZOOMSTART = 'zoomStart', ZOOMEND = 'zoomEnd';\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.viewer = options.viewer;\n                this.errorMessages = this.viewer.options.messages.errorMessages;\n            }\n        });\n        var OpenCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.upload = this.viewer.processor.upload;\n            },\n            exec: function () {\n                (this.viewer._upload || this._initUpload()).element.click();\n            },\n            _initUpload: function () {\n                var uploadOptions = {\n                    select: proxy(this._onSelect, this),\n                    success: proxy(this._onSuccess, this),\n                    error: proxy(this._onError, this),\n                    complete: proxy(this._onComplete, this),\n                    showFileList: false,\n                    multiple: false,\n                    validation: { allowedExtensions: ['.pdf'] }\n                };\n                if (this.upload) {\n                    extend(uploadOptions, {\n                        async: {\n                            saveUrl: this.upload.url,\n                            autoUpload: true,\n                            saveField: this.upload.saveField\n                        }\n                    });\n                }\n                var upload = $('<input name=\"files\" accept=\".pdf\" type=\"file\" />').kendoUpload(uploadOptions).getKendoUpload();\n                this.viewer._upload = upload;\n                return upload;\n            },\n            _onComplete: function () {\n                progress(this.viewer.pageContainer, false);\n            },\n            _onSuccess: function (e) {\n                var json = parseJSON(e.response);\n                if ($.isPlainObject(json)) {\n                    this.viewer.processor.fromJSON(json);\n                } else {\n                    this.viewer._triggerError({\n                        error: json,\n                        message: this.errorMessages.parseError\n                    });\n                }\n            },\n            _onError: function (e) {\n                this.viewer._triggerError({\n                    error: e.XMLHttpRequest.responseText,\n                    message: this.errorMessages.notSupported\n                });\n            },\n            _onSelect: function (e) {\n                var that = this;\n                var fileToUpload = e.files[0];\n                progress(that.viewer.pageContainer, true);\n                if (that.viewer.trigger(OPEN, { file: fileToUpload }) || that.upload) {\n                    return;\n                } else if (fileToUpload.extension.toLowerCase() !== '.pdf') {\n                    that.viewer._triggerError({\n                        error: fileToUpload,\n                        message: that.errorMessages.notSupported\n                    });\n                    return;\n                }\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    var document = e.target.result;\n                    that.viewer.fromFile(document);\n                };\n                reader.onerror = function () {\n                    that.viewer._triggerError({\n                        error: fileToUpload,\n                        message: that.errorMessages.parseError\n                    });\n                };\n                reader.readAsArrayBuffer(fileToUpload.rawFile);\n            }\n        });\n        var PageChangeCommand = Command.extend({\n            exec: function () {\n                var pageNumber = this.options.value;\n                this.viewer.activatePage(pageNumber);\n            }\n        });\n        var DownloadCommand = Command.extend({\n            exec: function () {\n                if (!this.viewer.document) {\n                    this.viewer._triggerError({ message: this.errorMessages.notFound });\n                    return;\n                }\n                var fileName = this.viewer.document.info && this.viewer.document.info.title || this.viewer.options.messages.defaultFileName;\n                this.viewer.processor.downloadFile(fileName);\n            }\n        });\n        var ExportCommand = Command.extend({\n            init: function (options) {\n                options = $.extend(options, this.options);\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var dialog = this.viewer._saveDialog || this._initDialog();\n                dialog._updateModel({\n                    pagesCount: this.viewer.document && this.viewer.document.total || 1,\n                    page: this.viewer.options.page\n                });\n                dialog.open();\n            },\n            apply: function (viewModel) {\n                var extension = viewModel.extension;\n                if (extension === '.png') {\n                    this.viewer.exportImage(viewModel);\n                } else if (extension === '.svg') {\n                    this.viewer.exportSVG(viewModel);\n                }\n            },\n            _initDialog: function () {\n                this.viewer._saveDialog = new kendo.pdfviewer.dialogs.ExportAsDialog({\n                    apply: this.apply.bind(this),\n                    pagesCount: this.viewer.document && this.viewer.document.total || 1,\n                    messages: this.viewer.options.messages\n                });\n                return this.viewer._saveDialog;\n            }\n        });\n        var EnableSelectionCommand = Command.extend({\n            exec: function () {\n                var that = this, viewer = that.viewer;\n                viewer._toggleSelection(true);\n            }\n        });\n        var EnablePanCommand = Command.extend({\n            exec: function () {\n                var that = this, viewer = that.viewer;\n                viewer._toggleSelection(false);\n            }\n        });\n        var OpenSearchCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                that.viewer = options.viewer;\n                if (!that.viewer.searchDialog) {\n                    that.viewer.searchDialog = new kendo.pdfviewer.dialogs.SearchDialog({\n                        position: {\n                            top: that.viewer.pageContainer.offset().top,\n                            left: that.viewer.pageContainer.offset().left\n                        },\n                        messages: that.viewer.options.messages.dialogs.search,\n                        open: proxy(that._open, that),\n                        next: proxy(that._next, that),\n                        prev: proxy(that._prev, that),\n                        close: proxy(that._close, that)\n                    });\n                }\n                Command.fn.init.call(that, options);\n            },\n            exec: function () {\n                var that = this;\n                that.viewer.searchDialog.open();\n            },\n            _open: function () {\n                var that = this;\n                that.changeHandler = proxy(that._change, that);\n                that.zoomStartHandler = proxy(that._closeDialog, that);\n                that.openFileHandler = proxy(that._closeDialog, that);\n                if (!that.viewer._searchDOM) {\n                    that.viewer._initSearchDOM();\n                    that.viewer.searchDialog.searchModel.bind('change', that.changeHandler);\n                    that.viewer.bind('zoomStart', that.zoomStartHandler);\n                    that.viewer.bind('open', that.openFileHandler);\n                }\n            },\n            _close: function () {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                that.viewer.searchDialog.searchModel.unbind('change', that.changeHandler);\n                that.viewer.unbind('zoomStart', that.zoomStartHandler);\n                that.viewer.unbind('open', that.openFileHandler);\n                searchEngine.destroy();\n                delete that.viewer._searchDOM;\n                that._updateSearchModel();\n            },\n            _change: function (ev) {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                var field = ev.field;\n                var model = that.viewer.searchDialog.searchModel;\n                var value = model[field];\n                if (!searchEngine) {\n                    return;\n                }\n                switch (field) {\n                case 'searchText':\n                    searchEngine.search(value, model.matchCase);\n                    that._updateSearchModel();\n                    break;\n                case 'matchCase':\n                    searchEngine.search(model.searchText, value);\n                    that._updateSearchModel();\n                    break;\n                default:\n                    break;\n                }\n            },\n            _next: function () {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                if (searchEngine.matches && searchEngine.matches.length) {\n                    searchEngine.nextMatch();\n                    that._updateSearchModel();\n                }\n            },\n            _prev: function () {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                if (searchEngine.matches && searchEngine.matches.length) {\n                    searchEngine.previousMatch();\n                    that._updateSearchModel();\n                }\n            },\n            _updateSearchModel: function () {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                var model = that.viewer.searchDialog.searchModel;\n                if (searchEngine) {\n                    model.set('matches', searchEngine.matches.length);\n                    model.set('matchIndex', searchEngine.getMarkedIndex());\n                    that._scrollToMark();\n                } else {\n                    model.set('searchText', '');\n                    model.set('matches', 0);\n                    model.set('matchIndex', 0);\n                    model.set('matchCase', false);\n                }\n            },\n            _scrollToMark: function () {\n                var that = this;\n                var searchEngine = that.viewer._searchDOM;\n                var marked = searchEngine.getFirstMarked();\n                var scroller = that.viewer._scroller;\n                var position;\n                if (!marked.length) {\n                    return;\n                }\n                position = marked.offset().top - scroller.scrollElement.offset().top - 100;\n                scroller.scrollTo(scroller.scrollLeft, position * -1);\n            },\n            _closeDialog: function () {\n                var that = this;\n                that.viewer.searchDialog.dialog.close();\n            }\n        });\n        var ZoomCommand = Command.extend({\n            exec: function () {\n                var that = this, options = that.options, viewer = that.viewer, scale = options.scale, loadedPagesHeight = 0, page = that.viewer._pageNum, containerHeight = viewer.pageContainer[0].clientHeight, updatedVisiblePagesCount = 1, renderTasks = [];\n                if (viewer.processingLib === 'dpl') {\n                    return;\n                }\n                scale = that._calculateZoom();\n                var updateViewer = function () {\n                    var scroller = that.viewer._scroller, scrollingStarted = viewer._scrollingStarted;\n                    if (scroller.scrollTop > scroller.scrollHeight()) {\n                        scroller._resize();\n                    }\n                    if (!scrollingStarted) {\n                        viewer.activatePage(page);\n                        viewer._scrollingStarted = false;\n                    }\n                };\n                if (!scale) {\n                    return;\n                }\n                viewer.zoomScale = scale;\n                viewer._scrollingStarted = false;\n                viewer.pages.forEach(function (page) {\n                    var pageHeight;\n                    if (viewer._visiblePages.indexOf(page) !== -1 && page.loaded) {\n                        renderTasks.push(page.render(scale));\n                        pageHeight = page._page.getViewport({ scale: scale }).height;\n                    } else {\n                        page.resize(scale);\n                        pageHeight = page.element.height();\n                    }\n                    loadedPagesHeight += pageHeight;\n                    if (loadedPagesHeight <= containerHeight) {\n                        updatedVisiblePagesCount++;\n                    }\n                });\n                if (viewer._visiblePagesCount != updatedVisiblePagesCount) {\n                    viewer._visiblePagesCount = updatedVisiblePagesCount;\n                    viewer._loadVisiblePages();\n                }\n                Promise.all(renderTasks).then(function () {\n                    updateViewer();\n                    that._triggerZoomEnd(scale);\n                }).catch(function () {\n                    updateViewer();\n                    that._triggerZoomEnd(scale);\n                });\n            },\n            _calculateZoom: function () {\n                var options = this.options, viewer = this.viewer, viewerOptions = viewer.options, pageContainer = viewer.pageContainer, visibleCanvas = viewer._visiblePages && viewer._visiblePages[0].canvas, scale = options.scale, scaleValue = scale, preventZoom;\n                viewer._allowResize = false;\n                viewer._autoFit = false;\n                if (options.zoomIn) {\n                    scaleValue = scale = viewer.zoomScale + viewerOptions.zoomRate;\n                } else if (options.zoomOut) {\n                    scaleValue = scale = viewer.zoomScale - viewerOptions.zoomRate;\n                } else if (scale === 'auto') {\n                    viewer._allowResize = true;\n                    scaleValue = viewer._autoZoomScale;\n                } else if (scale === 'actual') {\n                    scaleValue = 1;\n                } else if (scale === 'fitToWidth') {\n                    viewer._allowResize = true;\n                    viewer._autoFit = 'fitToWidth';\n                    scaleValue = pageContainer.width() / (visibleCanvas.width / viewer.zoomScale);\n                } else if (scale === 'fitToPage') {\n                    viewer._allowResize = true;\n                    viewer._autoFit = 'fitToPage';\n                    scaleValue = pageContainer.height() / (visibleCanvas.height / viewer.zoomScale);\n                }\n                preventZoom = scale < viewerOptions.zoomMin || scale > viewerOptions.zoomMax;\n                if (preventZoom || viewer.trigger(ZOOMSTART, { scale: scale })) {\n                    return;\n                }\n                if (options.updateComboBox) {\n                    viewer.toolbar._updateZoomComboBox(scale);\n                }\n                return scaleValue;\n            },\n            _triggerZoomEnd: function (scale) {\n                var that = this, viewer = that.viewer;\n                viewer.trigger(ZOOMEND, { scale: scale });\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                if (!that.viewer.document) {\n                    that.viewer._triggerError({ message: this.errorMessages.notFound });\n                    return;\n                }\n                that._renderPrintContainer();\n                that._loadAllPages();\n            },\n            _renderPrintContainer: function () {\n                this.printContainer = $('<div></div>');\n            },\n            _loadAllPages: function () {\n                var that = this;\n                var pages = that.viewer.pages;\n                var originalScale = that.viewer.zoom();\n                var timeout = 20;\n                var printImmediately = true;\n                var interval;\n                for (var i = 0; i < pages.length; i++) {\n                    if (!pages[i].loaded) {\n                        printImmediately = false;\n                        pages[i].load(4 / 3, true);\n                        timeout += 20;\n                    }\n                }\n                var printHandler = function () {\n                    clearTimeout(interval);\n                    interval = setTimeout(function () {\n                        that.viewer.unbind('render', printHandler);\n                        that._renderPrintPages();\n                        setTimeout(function () {\n                            that._printDocument();\n                            that.viewer.zoom(originalScale);\n                        }, 0);\n                    }, timeout);\n                };\n                if (printImmediately) {\n                    printHandler();\n                } else {\n                    that.viewer.bind('render', printHandler);\n                }\n            },\n            _renderPrintPages: function () {\n                var pages = this.viewer.pages;\n                for (var i = 0; i < pages.length; i++) {\n                    this._renderPrintImage(pages[i]);\n                }\n            },\n            _renderPrintImage: function (page) {\n                var canvas = page.canvas;\n                var div = $('<div></div>');\n                var img = '<img src=\\'' + canvas.toDataURL() + '\\' width=\\'' + page.width + 'px\\' height=\\'' + page.height + 'px\\' />';\n                div.append(img);\n                this.printContainer.append(div);\n            },\n            _printDocument: function () {\n                var that = this;\n                var pages = that.viewer.pages;\n                var width = pages[0].width;\n                var height = pages[0].height;\n                var myWindow = window.open('', '', 'innerWidth=' + width + ',innerHeight=' + height + 'location=no,titlebar=no,toolbar=no');\n                myWindow.document.write(that.printContainer.html());\n                myWindow.document.close();\n                myWindow.focus();\n                myWindow.print();\n                myWindow.close();\n            }\n        });\n        extend(kendo.pdfviewer, {\n            OpenCommand: OpenCommand,\n            PageChangeCommand: PageChangeCommand,\n            DownloadCommand: DownloadCommand,\n            EnableSelectionCommand: EnableSelectionCommand,\n            EnablePanCommand: EnablePanCommand,\n            ExportCommand: ExportCommand,\n            PrintCommand: PrintCommand,\n            OpenSearchCommand: OpenSearchCommand,\n            ZoomCommand: ZoomCommand\n        });\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.pdfviewer', [\n        'kendo.mobile.scroller',\n        'pdfviewer/processors/pdfjs-processor',\n        'pdfviewer/processors/dpl-processor',\n        'pdfviewer/toolbar',\n        'pdfviewer/page',\n        'pdfviewer/search',\n        'pdfviewer/dialogs',\n        'pdfviewer/commands'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'pdfviewer',\n        name: 'PDFViewer',\n        category: 'web',\n        description: 'PDFViewer to display pdfs in the browser',\n        depends: [\n            'core',\n            'window',\n            'dialog',\n            'toolbar',\n            'mobile.scroller',\n            'upload',\n            'combobox',\n            'drawing',\n            'binder',\n            'dropdownlist',\n            'numerictextbox'\n        ]\n    };\n    (function ($, undefined) {\n        var NS = '.kendoPDFViewer', kendo = window.kendo, ui = kendo.ui, proxy = $.proxy, extend = $.extend, drawing = kendo.drawing, keys = $.extend({\n                PLUS: 187,\n                MINUS: 189,\n                ZERO: 48,\n                NUMPAD_ZERO: 96\n            }, kendo.keys), Page, Widget = ui.Widget, progress = kendo.ui.progress, SCROLL = 'scroll', RENDER = 'render', OPEN = 'open', ERROR = 'error', FOCUS = 'focus' + NS, KEYDOWN = 'keydown' + NS, MOUSEWHEEL = 'DOMMouseScroll' + NS + ' mousewheel' + NS, UPDATE = 'update', ZOOM_SCALE = 1.25, PAGE_CHANGE = 'pagechange', ZOOMSTART = 'zoomStart', ZOOMEND = 'zoomEnd', ZOOMCOMMAND = 'ZoomCommand', WHITECOLOR = '#ffffff', TABINDEX = 'tabindex', PROCESSORS = {\n                pdfjs: 'pdfjs',\n                dpl: 'dpl'\n            }, styles = {\n                viewer: 'k-pdf-viewer k-widget',\n                scroller: 'k-canvas k-list-scroller',\n                enableTextSelection: 'k-enable-text-select',\n                enablePanning: 'k-enable-panning',\n                highlightClass: 'k-search-highlight',\n                charClass: 'k-text-char'\n            };\n        var PDFViewer = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, kendo.deepExtend({}, this.options, options));\n                that._wrapper();\n                if (that.options.toolbar) {\n                    that._renderToolbar();\n                }\n                that._initProcessor(options || {});\n                that._renderPageContainer();\n                that._loadDocument();\n                that._tabindex();\n                kendo.notify(that, kendo.ui);\n            },\n            events: [\n                RENDER,\n                OPEN,\n                ERROR,\n                ZOOMSTART,\n                ZOOMEND\n            ],\n            options: {\n                name: 'PDFViewer',\n                view: { type: 'canvas' },\n                pdfjsProcessing: { file: null },\n                dplProcessing: {\n                    read: {\n                        url: null,\n                        type: 'GET',\n                        dataType: 'json',\n                        pageField: 'pageNumber'\n                    },\n                    upload: {\n                        url: null,\n                        saveField: 'file'\n                    },\n                    download: { url: null },\n                    loadOnDemand: false\n                },\n                toolbar: { items: [] },\n                width: 1000,\n                height: 1200,\n                page: 1,\n                defaultPageSize: {\n                    width: 794,\n                    height: 1123\n                },\n                scale: null,\n                zoomMin: 0.5,\n                zoomMax: 4,\n                zoomRate: 0.25,\n                messages: {\n                    defaultFileName: 'Document',\n                    toolbar: {\n                        zoom: {\n                            zoomOut: 'Zoom Out',\n                            zoomIn: 'Zoom In',\n                            actualWidth: 'Actual Width',\n                            autoWidth: 'Automatic Width',\n                            fitToWidth: 'Fit to Width',\n                            fitToPage: 'Fit to Page'\n                        },\n                        open: 'Open',\n                        exportAs: 'Export',\n                        download: 'Download',\n                        pager: {\n                            first: 'Go to the first page',\n                            previous: 'Go to the previous page',\n                            next: 'Go to the next page',\n                            last: 'Go to the last page',\n                            of: ' of {0} ',\n                            page: 'page',\n                            pages: 'pages'\n                        },\n                        print: 'Print',\n                        toggleSelection: 'Enable Selection',\n                        togglePan: 'Enable Panning',\n                        search: 'Search'\n                    },\n                    errorMessages: {\n                        notSupported: 'Only pdf files allowed.',\n                        parseError: 'PDF file fails to process.',\n                        notFound: 'File is not found.'\n                    },\n                    dialogs: {\n                        exportAsDialog: {\n                            title: 'Export...',\n                            defaultFileName: 'Document',\n                            pdf: 'Portable Document Format (.pdf)',\n                            png: 'Portable Network Graphics (.png)',\n                            svg: 'Scalable Vector Graphics (.svg)',\n                            labels: {\n                                fileName: 'File name',\n                                saveAsType: 'Save as',\n                                page: 'Page'\n                            }\n                        },\n                        okText: 'OK',\n                        save: 'Save',\n                        cancel: 'Cancel',\n                        search: {\n                            inputLabel: 'Search Text',\n                            matchCase: 'Match Case',\n                            next: 'Next Match',\n                            previous: 'Previous Match',\n                            close: 'Close',\n                            of: 'of'\n                        }\n                    }\n                }\n            },\n            _wrapper: function () {\n                var that = this, options = that.options;\n                that.wrapper = that.element;\n                that.wrapper.width(options.width).height(options.height).addClass(styles.viewer).on(FOCUS, proxy(that._focus, that)).on(KEYDOWN, proxy(that._keydown, that));\n                that._allowResize = that.options.scale === null;\n                that._autoZoomScale = ZOOM_SCALE;\n                that.zoomScale = that.options.scale || that._autoZoomScale;\n                that._resizeHandler = kendo.onResize(function () {\n                    that.resize();\n                });\n                that._pageNum = that.options.page;\n            },\n            _focus: function (e) {\n                if (this.toolbar) {\n                    this.toolbar.wrapper.focus();\n                } else {\n                    this.pageContainer.focus();\n                }\n                e.preventDefault();\n            },\n            _keydown: function (e) {\n                var plusShortcuts = [\n                        keys.PLUS,\n                        keys.NUMPAD_PLUS\n                    ], minusShortcuts = [\n                        keys.MINUS,\n                        keys.NUMPAD_MINUS\n                    ], zeroShortcuts = [\n                        keys.ZERO,\n                        keys.NUMPAD_ZERO\n                    ], shouldExecute = false, args = {\n                        command: ZOOMCOMMAND,\n                        options: { updateComboBox: true }\n                    };\n                if (!e.ctrlKey || this._blankPage || this.processingLib === PROCESSORS.dpl) {\n                    return;\n                }\n                if (plusShortcuts.includes(e.keyCode)) {\n                    args.options.zoomIn = true;\n                    shouldExecute = true;\n                } else if (minusShortcuts.includes(e.keyCode)) {\n                    args.options.zoomOut = true;\n                    shouldExecute = true;\n                } else if (zeroShortcuts.includes(e.keyCode)) {\n                    args.options.scale = ZOOM_SCALE;\n                    shouldExecute = true;\n                }\n                if (shouldExecute) {\n                    this.execute(args);\n                    e.preventDefault();\n                }\n            },\n            _initProcessor: function (options) {\n                var that = this, processingOptions;\n                processingOptions = options.dplProcessing ? that.options.dplProcessing : that.options.pdfjsProcessing;\n                that.processingLib = options.dplProcessing ? PROCESSORS.dpl : PROCESSORS.pdfjs;\n                that.processor = new kendo.pdfviewer[that.processingLib].processor(processingOptions, that);\n                Page = kendo.pdfviewer[that.processingLib].Page;\n            },\n            _renderToolbar: function () {\n                var that = this, options = that.options;\n                var toolbarOptions = {\n                    pager: { messages: options.messages.toolbar.pager },\n                    scale: options.scale,\n                    resizable: true,\n                    items: options.toolbar.items,\n                    width: options.width,\n                    action: that.execute.bind(that),\n                    messages: options.messages.toolbar,\n                    viewer: this\n                };\n                var toolbarElement = $('<div />');\n                toolbarElement.appendTo(that.element);\n                that.toolbar = new kendo.pdfviewer.Toolbar(toolbarElement, toolbarOptions);\n            },\n            _initErrorDialog: function (options) {\n                var that = this;\n                if (!that._errorDialog) {\n                    options = extend(options, { messages: that.options.messages });\n                    var dialogInstance = new kendo.pdfviewer.dialogs.ErrorDialog(options);\n                    that._errorDialog = dialogInstance._dialog;\n                }\n                return that._errorDialog;\n            },\n            _renderPageContainer: function () {\n                var that = this;\n                if (!that.pageContainer) {\n                    that.pageContainer = $('<div />');\n                    that.pageContainer.addClass(styles.scroller);\n                    that.pageContainer.attr(TABINDEX, 0);\n                    that.wrapper.append(that.pageContainer);\n                }\n            },\n            _triggerError: function (options) {\n                var dialog = this._initErrorDialog();\n                extend(options, { dialog: dialog });\n                if (this.pageContainer) {\n                    progress(this.pageContainer, false);\n                }\n                if (this.trigger(ERROR, options)) {\n                    return;\n                }\n                dialog.open().content(options.message);\n            },\n            _renderPages: function () {\n                var that = this, document = that.document, pagesData;\n                that.pages = [];\n                if (!document || !document.total) {\n                    that._renderBlankPage();\n                    return;\n                }\n                pagesData = document.pages;\n                for (var i = 1; i <= document.total; i++) {\n                    var viewerPage, pageData = {\n                            processor: that.processor,\n                            number: i\n                        };\n                    if (pagesData && pagesData.length) {\n                        pageData = extend(pageData, pagesData[i - 1]);\n                    }\n                    viewerPage = new Page(pageData, that);\n                    that.pages.push(viewerPage);\n                    that.pageContainer.append(viewerPage.element);\n                }\n                that._attachContainerEvents();\n                that._getVisiblePagesCount();\n            },\n            _renderBlankPage: function () {\n                this._blankPage = new Page(this.options.defaultPageSize, this);\n                this.pageContainer.append(this._blankPage.element);\n                this.trigger(UPDATE, { isBlank: true });\n            },\n            _resize: function () {\n                var that = this, containerWidth, ratio;\n                if (!that._allowResize) {\n                    return;\n                }\n                if (!that.pages || !that.pages.length) {\n                    if (that._blankPage) {\n                        ratio = containerWidth / that._blankPage.element.width();\n                        that._blankPage.resize(ratio);\n                    }\n                    return;\n                }\n                if (that.toolbar) {\n                    that.toolbar.resize(true);\n                }\n                if (that._resizeHandler) {\n                    clearTimeout(that._resizeHandler);\n                }\n                that._resizeHandler = setTimeout(that._resizePages.bind(that), 100);\n            },\n            _resizePages: function () {\n                var that = this, containerWidth = that.pageContainer[0].clientWidth, ratio = 0;\n                that.pages.forEach(function (page) {\n                    var currentRatio = containerWidth / page.element.width();\n                    if (currentRatio > ratio) {\n                        ratio = currentRatio;\n                    }\n                });\n                if (that._autoFit) {\n                    that.zoom(that._autoFit, true);\n                    return;\n                }\n                ratio = Math.min(Math.max(ratio, that.options.zoomMin), ZOOM_SCALE);\n                if (ratio != that.zoomScale) {\n                    that.zoom(ratio, true);\n                    that.zoomScale = ratio;\n                    that._allowResize = true;\n                }\n            },\n            _attachContainerEvents: function () {\n                var that = this;\n                that._wheel = kendo.throttle(that._wheel.bind(that), 300);\n                if (that.processingLib !== PROCESSORS.dpl) {\n                    that.pageContainer.on(MOUSEWHEEL, function (e) {\n                        if (!e.ctrlKey) {\n                            return;\n                        }\n                        if (document.activeElement !== that.pageContainer[0]) {\n                            that.pageContainer.focus();\n                        }\n                        that._wheel(e);\n                        e.preventDefault();\n                    });\n                }\n                that._scroller = new kendo.mobile.ui.Scroller(that.pageContainer, {\n                    zoom: false,\n                    elastic: true\n                });\n                that._scroller.scrollElement.addClass(styles.enablePanning);\n                that._scroller.bind(SCROLL, proxy(that._scroll, this));\n            },\n            _scroll: function (e) {\n                var that = this, containerScrollHeight = that.pageContainer[0].scrollHeight, containerHeight = that.pageContainer.height(), containerScrollTop = e.scrollTop, containerOffsetTop = that.pageContainer.offset().top, total = that.pages.length, pageNum = that._pageNum, pageIndex = pageNum - 1, pageToLoadNum = pageNum, pageToLoad, currentPage, currentPageTop, currentPageHeight, previousPage, prevPageTop, prevPageHeight, scrollDirection = containerScrollTop - that._prevScrollTop > 0 ? 1 : -1;\n                if (that._preventScroll || !total) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._scrollingStarted = true;\n                currentPage = that.pages[pageIndex];\n                currentPageTop = currentPage.element.offset().top - containerOffsetTop;\n                currentPageHeight = currentPage.element.height();\n                if (scrollDirection == -1 && that.pages[pageIndex + scrollDirection]) {\n                    previousPage = that.pages[pageIndex - that._visiblePagesCount] || that.pages[pageIndex + scrollDirection];\n                    prevPageTop = previousPage.element.offset().top - containerOffsetTop;\n                    prevPageHeight = previousPage.element.height();\n                }\n                if (Math.abs(containerScrollTop - (that._prevScrollTop || 0)) > containerHeight * that.zoomScale) {\n                    pageToLoadNum = Math.floor(containerScrollTop * (1 / (containerScrollHeight / total))) + 1;\n                } else if (currentPageTop < 0 && Math.abs(currentPageTop) >= currentPageHeight / 2 && scrollDirection === 1) {\n                    pageToLoadNum++;\n                } else if (previousPage && Math.abs(prevPageTop) <= prevPageHeight / 2) {\n                    pageToLoadNum--;\n                }\n                if (pageNum !== pageToLoadNum && pageToLoadNum >= 1 && pageToLoadNum <= total) {\n                    pageToLoad = that.pages[pageToLoadNum - 1].element;\n                    if (pageToLoad.offset().top > containerHeight) {\n                        return;\n                    }\n                    that._pageNum = pageToLoadNum;\n                    that._loadVisiblePages();\n                    that.trigger(UPDATE, {\n                        action: PAGE_CHANGE,\n                        page: pageToLoadNum,\n                        total: total\n                    });\n                }\n                that._prevScrollTop = containerScrollTop;\n            },\n            _wheel: function (e) {\n                var originalEvent = e.originalEvent, delta = originalEvent.wheelDelta ? -originalEvent.wheelDelta : originalEvent.detail, zoomIn = delta < 0;\n                this.execute({\n                    command: ZOOMCOMMAND,\n                    options: {\n                        zoomIn: zoomIn,\n                        zoomOut: !zoomIn,\n                        updateComboBox: true\n                    }\n                });\n                e.preventDefault();\n            },\n            zoom: function (scale, preventComboBoxChange) {\n                var that = this;\n                if (!scale) {\n                    return that.zoomScale;\n                }\n                return that.execute({\n                    command: ZOOMCOMMAND,\n                    options: {\n                        scale: scale,\n                        updateComboBox: !preventComboBoxChange\n                    }\n                });\n            },\n            execute: function (options) {\n                var commandOptions = extend({ viewer: this }, options.options);\n                var command = new kendo.pdfviewer[options.command](commandOptions);\n                return command.exec();\n            },\n            _loadDocument: function () {\n                var that = this;\n                var page = that.options.page;\n                progress(that.pageContainer, true);\n                that.processor.fetchDocument().done(function (document) {\n                    that._clearPages();\n                    that.document = document;\n                    that._renderPages();\n                    that.resize(true);\n                    if (document) {\n                        page = page >= 1 && page <= document.total ? page : 1;\n                        that.activatePage(page);\n                    }\n                    progress(that.pageContainer, false);\n                });\n            },\n            loadPage: function (number) {\n                var page = this.pages && this.pages[number - 1];\n                if (page) {\n                    return page.load(this.zoomScale);\n                }\n            },\n            activatePage: function (number) {\n                var page = this.pages && this.pages[number - 1], scroller = this._scroller, scrollerTopPosition, scrollerTopOffset, pageTopOffset, pageMargin;\n                if (!page) {\n                    return;\n                }\n                scrollerTopPosition = scroller.scrollTop;\n                scrollerTopOffset = scroller.element.offset().top;\n                pageTopOffset = page.element.offset().top;\n                pageMargin = !this._autoFit ? parseInt(page.element.css('marginTop'), 10) : 0;\n                this._pageNum = number;\n                this._loadVisiblePages();\n                this._preventScroll = true;\n                this._scroller.scrollTo(0, -scrollerTopPosition - pageTopOffset + scrollerTopOffset + pageMargin);\n                this.trigger(UPDATE, {\n                    action: PAGE_CHANGE,\n                    page: number,\n                    total: this.pages.length\n                });\n            },\n            _getVisiblePagesCount: function () {\n                var that = this, loadedPagesHeight = 0, updatedVisiblePagesCount = 0, containerHeight = that.pageContainer[0].clientHeight, index = 0;\n                while (loadedPagesHeight <= containerHeight && index < that.pages.length) {\n                    loadedPagesHeight += that.pages[index].element.height();\n                    updatedVisiblePagesCount++;\n                    index++;\n                }\n                that._visiblePagesCount = updatedVisiblePagesCount;\n            },\n            _loadVisiblePages: function () {\n                var pagesCount = this.pages && this.pages.length, minVisiblePageNum = Math.max(this._pageNum - this._visiblePagesCount, 1), maxVisiblePageNum = Math.min(this._pageNum + this._visiblePagesCount, pagesCount);\n                this._visiblePages = this.pages.slice(minVisiblePageNum - 1, maxVisiblePageNum);\n                for (var i = minVisiblePageNum; i <= maxVisiblePageNum; i++) {\n                    this.loadPage(i);\n                }\n            },\n            _loadAllPages: function () {\n                var pagesCount = this.pages && this.pages.length;\n                var promises = [];\n                for (var i = 0; i <= pagesCount; i++) {\n                    promises.push(this.loadPage(i));\n                }\n                return promises;\n            },\n            fromFile: function (file) {\n                this.zoomScale = this.options.scale || ZOOM_SCALE;\n                this.trigger(UPDATE, {\n                    action: 'zoom',\n                    zoom: this.options.scale || 'auto'\n                });\n                this.processor._updateDocument(file);\n                this._loadDocument();\n            },\n            exportImage: function (options) {\n                var that = this;\n                var pageNumber = options.page;\n                var page = that.pages[pageNumber - 1] || that._blankPage;\n                var rootGroup = new drawing.Group();\n                page.load();\n                var background = kendo.drawing.Path.fromRect(new kendo.geometry.Rect([\n                    0,\n                    0\n                ], [\n                    page.width,\n                    page.height\n                ]), {\n                    fill: { color: WHITECOLOR },\n                    stroke: null\n                });\n                progress(that.pageContainer, true);\n                rootGroup.append(background, page.group);\n                drawing.exportImage(rootGroup).done(function (data) {\n                    progress(that.pageContainer, false);\n                    kendo.saveAs({\n                        dataURI: data,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL || '',\n                        forceProxy: options.forceProxy,\n                        proxyTarget: options.proxyTarget\n                    });\n                });\n            },\n            exportSVG: function (options) {\n                var that = this;\n                var pageNumber = options.page;\n                var page = that.pages[pageNumber - 1] || that._blankPage;\n                progress(that.pageContainer, true);\n                page.load();\n                drawing.exportSVG(page.group).done(function (data) {\n                    progress(that.pageContainer, false);\n                    kendo.saveAs({\n                        dataURI: data,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL || '',\n                        forceProxy: options.forceProxy,\n                        proxyTarget: options.proxyTarget\n                    });\n                });\n            },\n            setOptions: function (options) {\n                var that = this;\n                if (options.pdfjsProcessing || options.dplProcessing) {\n                    that._initProcessor();\n                }\n                options = $.extend(that.options, options);\n                Widget.fn.setOptions.call(that, options);\n                if (options.page) {\n                    that._pageNum = options.page;\n                    that.activatePage(options.page);\n                }\n                if (options.width) {\n                    that.element.width(options.width);\n                }\n                if (options.height) {\n                    that.element.height(options.height);\n                }\n            },\n            destroy: function () {\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this._errorDialog) {\n                    this._errorDialog.destroy();\n                }\n                if (this._saveDialog) {\n                    this._saveDialog.destroy();\n                }\n                if (this._upload) {\n                    this._upload.destroy();\n                }\n                if (this.toolbar) {\n                    this.toolbar.unbind();\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n                if (this.pages && this.pages.length) {\n                    this.pages.forEach(function (page) {\n                        page.destroy();\n                    });\n                    this.pages = [];\n                }\n                if (this._scroller) {\n                    this._scroller.unbind();\n                    this._scroller.destroy();\n                }\n                this.pageContainer.off(NS);\n                Widget.fn.destroy.call(this);\n            },\n            _clearPages: function () {\n                this.pages = [];\n                this.document = null;\n                this._pageNum = 1;\n                this.pageContainer.off(NS);\n                this.pageContainer.empty();\n                if (this._scroller) {\n                    this._scroller.reset();\n                    this._scroller.unbind();\n                    this._scroller.destroy();\n                }\n            },\n            _toggleSelection: function (enable) {\n                var that = this;\n                if (enable === undefined) {\n                    enable = true;\n                }\n                that._scroller.userEvents._shouldNotMove = enable;\n                that._scroller.scrollElement.toggleClass(styles.enableTextSelection, enable);\n                that._scroller.scrollElement.toggleClass(styles.enablePanning, !enable);\n            },\n            _initSearchDOM: function () {\n                var that = this;\n                var promise = new Promise(function (resolve) {\n                    Promise.all(that._loadAllPages()).then(function () {\n                        that._searchDOM = new kendo.pdfviewer.SearchDOM({\n                            target: that._getTextLayers(),\n                            highlightClass: styles.highlightClass,\n                            charClass: styles.charClass\n                        });\n                        resolve();\n                    });\n                });\n                return promise;\n            },\n            _getTextLayers: function () {\n                return this.pages.map(function (page) {\n                    return page.textLayer;\n                });\n            }\n        });\n        ui.plugin(PDFViewer);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}